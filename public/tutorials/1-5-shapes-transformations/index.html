<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Black Thread Design  | Shapes and Transformations</title>
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">


  <meta name="viewport" content="width=device-width, initial-scale=1.0">


<meta name="generator" content="Hugo 0.32.4" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



  <link href='https://www.blackthreaddesign.com/css/standard.css' rel='stylesheet' type="text/css" />


<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway"/>

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />



<meta property="og:title" content="Shapes and Transformations" />
<meta property="og:description" content="Taking a quick look at the built in geometries and how to position them" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.blackthreaddesign.com/tutorials/1-5-shapes-transformations/" />
















<meta itemprop="name" content="Shapes and Transformations">
<meta itemprop="description" content="Taking a quick look at the built in geometries and how to position them">



<meta itemprop="wordCount" content="2439">



<meta itemprop="keywords" content="three.js,requirements,WebGL,Codepen,browser console,HTML," />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Shapes and Transformations"/>
<meta name="twitter:description" content="Taking a quick look at the built in geometries and how to position them"/>

  </head>

  <body>
    
  <nav class="masthead">

    <ul class="visible-links">
      <li class="masthead-title"><a href="/">Blackthread Design</a></li>
      <li id="spacer"></li>

      
        <li><a class="" href="https://www.blackthreaddesign.com/blog/">Blog</a></li>
      
        <li><a class="" href="https://www.blackthreaddesign.com/tutorials/">Tutorials</a></li>
      
        <li><a class="" href="https://www.blackthreaddesign.com/about/">About</a></li>
      
        <li><a class="" href="https://www.blackthreaddesign.com/contact/">Contact</a></li>
      
        <li><a class="" href="https://www.blackthreaddesign.com/experiments/">Experiments</a></li>
      
        <li><a class="" href="https://www.blackthreaddesign.com/loader/">Loader</a></li>
      

      <li><button class="fa fa-bars toggle-links hide"></button>
      </li></ul>
      <ul class="hidden-links fold"></ul>
  </nav>

  <script>


    ( function() {

      var Greedy = function Greedy( options ) {

        this.masthead = document.querySelector('.masthead');
        this.visibleLinks = this.masthead.querySelector('.visible-links');
        this.hiddenLinks = this.masthead.querySelector('.hidden-links');
        this.toggleButton = this.masthead.querySelector('.toggle-links');
        this.spacer = this.masthead.querySelector('#spacer');

        this.setupResize();
        this.setupButton();

        this.decreaseSize();
        this.decreaseSize();

      };

      Object.assign( Greedy.prototype, {

        visibleLinksWidth() {

          var width = 0;

          for( child in this.visibleLinks.children ){

            if ( this.visibleLinks.children.hasOwnProperty( child ) ) {

              if( this.visibleLinks.children[ child ].id !== spacer ) width += this.visibleLinks.children[ child ].offsetWidth;

            }

          }

          return width;
        },

        increaseSize() {

          this.spacer.style.width = 0;

          if( this.hiddenLinks.children.length === 0 ) {

            this.hiddenLinks.classList.add( 'fold' );
            this.setSpacerWidth();
            return;

          }

          var width = this.visibleLinksWidth() + this.hiddenLinks.firstChild.offsetWidth;

          while (
            this.hiddenLinks.children.length > 0 &&
            width < this.masthead.clientWidth
          ) {

            width += this.hiddenLinks.firstChild.offsetWidth;
            this.visibleLinks.insertBefore( this.hiddenLinks.firstChild, this.visibleLinks.lastChild );


          }

          this.showButton();
          this.setSpacerWidth();

        },

        decreaseSize() {

          this.spacer.style.width = 0;

          while ( this.masthead.clientWidth < this.visibleLinks.scrollWidth ) {

            if( this.visibleLinks.children.length === 3 ) {

              this.showButton();
              this.setSpacerWidth();
              return;

            }


            var secondLastChild = this.visibleLinks.children[ this.visibleLinks.children.length - 2 ];
            this.hiddenLinks.insertBefore( secondLastChild, this.hiddenLinks.firstChild );

          }

          this.showButton();
          this.setSpacerWidth();

        },

        setSpacerWidth(){

          this.spacer.style.width = this.visibleLinks.offsetWidth - this.visibleLinksWidth() + 'px';

        },

        showButton() {

          if( this.hiddenLinks.children.length === 0 ) this.toggleButton.classList.add( 'hide' );
          else this.toggleButton.classList.remove( 'hide' );

        },

        setupResize: function() {

          var self = this;
          var lastWidth = window.innerWidth;

          window.addEventListener( 'resize', function() {

            if( window.innerWidth > lastWidth ) self.increaseSize();
            else if( window.innerWidth < lastWidth ) self.decreaseSize();

            lastWidth = window.innerWidth;
          } );

        },

        setupButton: function() {

          var self = this;

          this.toggleButton.addEventListener( 'click', function() {

            self.hiddenLinks.classList.toggle( 'fold' );

          } );


        },

      } );

      var menu = new Greedy();

      const masthead = document.querySelector( '.masthead' );

      document.addEventListener( 'scroll', () => {

        if (window.scrollY > 50) {
          masthead.classList.add( 'shrink' );
        } else {
          masthead.classList.remove( 'shrink' );
        }

      } );

    })();

  </script>

    <main role="main" id="main">

  
    <div id="page-content">
    <button id="toggle-nav" class="fa fa-bars fa-2x"></button>

<nav id="vert-nav" class="fold">
  <ul>
    <li class="nav-title"></li>
    
    
      <li>
        
          </span><a href="/blog/progress-bar/" class="">Faking a progress bar in three.js</a>
        
      </li>
    
      <li>
        
          </span><a href="/blog/promisifying-threejs-loaders/" class="">Promisifying three.js loaders</a>
        
      </li>
    
  </ul>
</nav>

<script>

  var sidenav = function() {

    var content = document.querySelector( '#main' );
    var toggleButton = document.querySelector( '#toggle-nav' );
    var nav = document.querySelector( '#vert-nav' );

    var breakpoint = 1280;

    function updateMenu(){

      if( content.offsetWidth < breakpoint ) {

        if( !toggleButton.classList.contains( 'hide' ) ) return;
        toggleButton.classList.remove( 'hide' );
        nav.classList.add( 'fold' );

      }
      else {

        if( toggleButton.classList.contains( 'hide' ) ) return;
        toggleButton.classList.add( 'hide' );
        nav.classList.remove( 'fold' );

      }

    }

    updateMenu();

    toggleButton.addEventListener( 'click', function( e ) {

      e.preventDefault();

      nav.classList.toggle( 'fold' );

    } );

    window.addEventListener( 'resize', updateMenu );

  };

  window.addEventListener( 'load', sidenav );

</script>
  

    <article id="article">
      <header>
        <h2>Shapes and Transformations</h2>
      </header>
      
  <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#setting-up-the-scene">Setting up the scene</a></li>
<li><a href="#the-built-in-geometries">The built-in geometries</a></li>
<li><a href="#move-geometry-creation-to-a-separate-function">Move geometry creation to a separate function</a></li>
<li><a href="#adding-a-second-mesh">Adding a second mesh</a>
<ul>
<li><a href="#setting-the-material-side-parameter">Setting the <code>material.side</code> parameter</a></li>
</ul></li>
<li><a href="#adding-more-meshes-and-moving-them-around">Adding more meshes and moving them around</a>
<ul>
<li><a href="#the-three-js-coordinate-system">The three.js coordinate system</a>
<ul>
<li><a href="#the-x-axis">The x-axis</a></li>
<li><a href="#the-y-axis">The y-axis</a></li>
<li><a href="#the-z-axis">The z-axis</a></li>
</ul></li>
<li><a href="#our-first-transformation-translation">Our first transformation: Translation</a>
<ul>
<li><a href="#transforming-meshes-vs-transforming-geometries">Transforming meshes vs transforming geometries</a></li>
</ul></li>
<li><a href="#adding-the-final-octahedrons">Adding the final octahedrons</a></li>
<li><a href="#transformation-number-2-scale">Transformation number 2: Scale</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>

      
  <span class="reading-time" title="Read time">
    <strong>Reading time: </strong> around 13 minutes
  </span>

      <section class="content">
        

<p>In this chapter, we&rsquo;ll take a lighting quick look at some of the geometric shapes that are built into three.js. We&rsquo;ve already seen two of them, the Torus Knot from chapters 1.1 and 1.2, and the Box from Chapter 1.3.</p>

<p>We&rsquo;ll also take a look at how to move them around (<code>translate</code> them), <code>scale</code> them up and down and <code>rotate</code> them. Collectively, along with the less common <code>shear</code>, these are known as transformations (technically, they are <em>linear</em> or <em>affine</em> transformations).</p>

<p>We&rsquo;ll introduce a new word now, just so that you are not too surprised when you come across it later. And that word is&hellip; (drumroll):</p>

<p>{:.notice}
Quaternion</p>

<p>These things are seriously cool. They are a different way to rotate objects, rather than the standard rotation around the <code>x</code>, <code>y</code> and <code>z</code> axes, and have several benefits. We&rsquo;ll go over them in detail later, for now just take a note of the word and remember that these are not really any more complicated than normal rotations, they just take a little while to get used to.</p>

<p>Here&rsquo;s where we left off last time.</p>

<p><p data-height="400" data-theme-id="0" data-slug-hash="eydKyM" data-default-tab="result" class='codepen'></p>
<script async="async" src="//codepen.io/assets/embed/ei.js"></script></p>

<h3 id="setting-up-the-scene">Setting up the scene</h3>

<p>Start by moving the camera back a bit so that we can see more of the scene:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">  <span style="color:#a6e22e">camera</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">150</span> );</code></pre></div>

<p>Also, remove the texture loader lines and change the material back to</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">  <span style="color:#75715e">// create a material
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">material</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">MeshStandardMaterial</span>( { <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0xffffff</span>} );</code></pre></div>

<p>We now have a plain white cube against a black background. Poetic? Boring? Your choice.</p>

<h3 id="the-built-in-geometries">The built-in geometries</h3>

<p>All the built-in geometries (20 in total as of R89) are listed in the docs and come in two flavours, <code>Geometry</code>, and <code>BufferGeometry</code>. We will cover the difference between the two soon, but for now just remember this rule:</p>

<p>{:.notice}
Always use BufferGeometry</p>

<p>The Geometry types are older and less efficient. They are kept around to prevent old applications and tutorials from breaking too badly. BufferGeometry is newer, cooler, faster and smell better, at the expense of being just a little bit harder to work with.</p>

<p>These geometries range from the mundane:</p>

<ul>
<li><a href="https://threejs.org/docs/#api/geometries/BoxBufferGeometry">BoxBufferGeometry</a></li>
<li><a href="https://threejs.org/docs/#api/geometries/PlaneBufferGeometry">PlaneBufferGeometry</a></li>
<li><a href="https://threejs.org/docs/#api/geometries/ShapeBufferGeometry">SphereBufferGeometry</a></li>
</ul>

<p>To the exotic:</p>

<ul>
<li><a href="https://threejs.org/docs/#api/geometries/DodecahedronBufferGeometry">DodecahedronBufferGeometry</a></li>
<li><a href="https://threejs.org/docs/#api/geometries/ParametricBufferGeometry">ParametricBufferGeometry</a></li>
<li><a href="https://threejs.org/docs/#api/geometries/TorusKnotBufferGeometry">TorusKnotBufferGeometry</a></li>
</ul>

<p>To the specialised:</p>

<ul>
<li><a href="https://threejs.org/docs/#api/geometries/ExtrudeBufferGeometry">ExtrudeBufferGeometry</a></li>
<li><a href="https://threejs.org/docs/#api/geometries/ShapeBufferGeometry">ShapeBufferGeometry</a></li>
<li><a href="https://threejs.org/docs/#api/geometries/TextBufferGeometry">TextBufferGeometry</a></li>
</ul>

<h3 id="move-geometry-creation-to-a-separate-function">Move geometry creation to a separate function</h3>

<p>Let&rsquo;s move our mesh creation out of the <code>init</code> function and into a separate function called <code>initMeshes</code> to keep things clean. We&rsquo;ll also give the current material, geometry and mesh less generic names since we will soon have more than one of each. Once we have done so, our complete code will look like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// these need to be accessed inside more than one function so we&#39;ll declare them first
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">camera</span>, <span style="color:#a6e22e">renderer</span>, <span style="color:#a6e22e">scene</span>;

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">init</span>() {

  <span style="color:#75715e">// create a WebGLRenderer and set its width and height
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">renderer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">WebGLRenderer</span>();
  <span style="color:#a6e22e">renderer</span>.<span style="color:#a6e22e">setSize</span>( window.<span style="color:#a6e22e">innerWidth</span>, window.<span style="color:#a6e22e">innerHeight</span> );

  <span style="color:#75715e">// add the automatically created canvas element to the page
</span><span style="color:#75715e"></span>  document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">appendChild</span>( <span style="color:#a6e22e">renderer</span>.<span style="color:#a6e22e">domElement</span> );

  <span style="color:#75715e">// create a Scene
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">scene</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Scene</span>();

  <span style="color:#75715e">// set up the options for a perspective camera
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fov</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">35</span>; <span style="color:#75715e">// fov = Field Of View
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">aspect</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">innerWidth</span> <span style="color:#960050;background-color:#1e0010">/ window.innerHeight;</span>
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">nearClippingPlane</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.1</span>;
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">farClippingPlane</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>;

  <span style="color:#a6e22e">camera</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">PerspectiveCamera</span>( <span style="color:#a6e22e">fov</span>, <span style="color:#a6e22e">aspect</span>, <span style="color:#a6e22e">nearClippingPlane</span>, <span style="color:#a6e22e">farClippingPlane</span> );

  <span style="color:#75715e">// every object is initially created at ( 0, 0, 0 )
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// we&#39;ll move the camera back a bit so that we can view the scene
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">camera</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">150</span> );

  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">controls</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">OrbitControls</span>( <span style="color:#a6e22e">camera</span> );

  <span style="color:#75715e">// create a global illumination light
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ambientLight</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">AmbientLight</span>( <span style="color:#ae81ff">0xffffff</span>, <span style="color:#ae81ff">1.0</span> );

  <span style="color:#75715e">// remember to add the light to the scene
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">ambientLight</span> );

  <span style="color:#75715e">// Create an omnidirectional point light
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">pointLight</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">PointLight</span>( <span style="color:#ae81ff">0xffffff</span>, <span style="color:#ae81ff">2.0</span> );

  <span style="color:#a6e22e">pointLight</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">20</span> );

  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">pointLight</span> );

}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">initMeshes</span>() {

  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">boxGeometry</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">BoxBufferGeometry</span>( <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">15</span> );
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">boxMaterial</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">MeshStandardMaterial</span>( { <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0xffffff</span> } );
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">boxMesh</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Mesh</span>( <span style="color:#a6e22e">boxGeometry</span>, <span style="color:#a6e22e">boxMaterial</span> );

  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">boxMesh</span> );

}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">animate</span>() {

  <span style="color:#75715e">// call animate recursively
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">requestAnimationFrame</span>( <span style="color:#a6e22e">animate</span> );

  <span style="color:#a6e22e">renderer</span>.<span style="color:#a6e22e">render</span>( <span style="color:#a6e22e">scene</span>, <span style="color:#a6e22e">camera</span> );

}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onWindowResize</span>() {

  <span style="color:#75715e">// set the aspect ratio to match the new browser window aspect ratio
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">camera</span>.<span style="color:#a6e22e">aspect</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">innerWidth</span> <span style="color:#960050;background-color:#1e0010">/ window.innerHeight;</span>

  <span style="color:#75715e">// update the camera&#39;s frustum
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">camera</span>.<span style="color:#a6e22e">updateProjectionMatrix</span>();

  <span style="color:#75715e">// update the size of the renderer AND the canvas
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">renderer</span>.<span style="color:#a6e22e">setSize</span>( window.<span style="color:#a6e22e">innerWidth</span>, window.<span style="color:#a6e22e">innerHeight</span> );

}

window.<span style="color:#a6e22e">addEventListener</span>( <span style="color:#e6db74">&#39;resize&#39;</span>, <span style="color:#a6e22e">onWindowResize</span> );

<span style="color:#75715e">// call the init function to set everything up
</span><span style="color:#75715e"></span><span style="color:#a6e22e">init</span>();

<span style="color:#75715e">// call the initMeshes function to create meshes and add them to the scene
</span><span style="color:#75715e"></span><span style="color:#a6e22e">initMeshes</span>();

<span style="color:#75715e">// then call the animate function to render the scene
</span><span style="color:#75715e"></span><span style="color:#a6e22e">animate</span>();</code></pre></div>

<p>Note that we&rsquo;ve also removed the <code>mesh</code> variable from the very top line since we no longer need to access it outside the initMesh function.</p>

<h3 id="adding-a-second-mesh">Adding a second mesh</h3>

<p>Let&rsquo;s add a flat geometry this time - a <a href="https://threejs.org/docs/#api/geometries/RingBufferGeometry">RingBufferGeometry</a>.</p>

<p>Add the following lines, inside the <code>initMesh</code> function and after we have created the box:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">...
  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">boxMesh</span> );

  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ringGeometry</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">RingBufferGeometry</span>( <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">32</span> );
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ringMaterials</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">MeshStandardMaterial</span>( { <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0xff0000</span>, <span style="color:#a6e22e">side</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">DoubleSide</span> } ); <span style="color:#75715e">// red color
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ringMesh</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Mesh</span>( <span style="color:#a6e22e">ringGeometry</span>, <span style="color:#a6e22e">ringMaterials</span> );

  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">ringMesh</span> );
...</code></pre></div>

<p>We are adding the <code>boxMesh</code> and <code>ringMesh</code> to the scene separately. We could also do this in one line:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">boxMesh</span>, <span style="color:#a6e22e">ringMesh</span> );</code></pre></div>

<p>I prefer to keep this separate so that I can quickly comment out a line if I want to remove an object. It&rsquo;s up to you though.</p>

<p>We are passing three arguments to the <code>RingBufferGeometry</code>: the outer radius (20), the inner radius (15), and the theta segments (32) which was a name given to the parameter that controls the &ldquo;fineness&rdquo; of the mesh and therefore the &ldquo;roundness&rdquo; of the ring. Try playing around with this number, and also check the docs page for any other parameter there might be.</p>

<h4 id="setting-the-material-side-parameter">Setting the <code>material.side</code> parameter</h4>

<p>The final thing that we&rsquo;ve done here is add a second parameter to the material: <code>material.side</code>. And we&rsquo;ve set it to <code>THREE.DoubleSide</code>. This is a <em>constant</em> - there are quite a few constants used in three.js, and they are used for settings on all kinds of things - materials, the renderer, textures and so on.</p>

<p>For the material&rsquo;s side, there are three constants available: <code>THREE.FrontSide</code> (the default), <code>THREE.BackSide</code>, and <code>THREE.DoubleSide</code>, which we are using here. Try setting the value of side for the ring to each of these in turn and see what happens.</p>

<p>{:.paragraph-notice}
The reason we need to set this here is that the ring is <em>flat</em> - that is, it&rsquo;s made up of just a single plane of polygons, and polygons by default can only be seen from one side, which makes rendering them faster. For most 3D objects this is fine since you can&rsquo;t see inside them. But if you were to place the camera inside the cube right now, it would be invisible unless you set it&rsquo;s <code>material.side</code> to <code>THREE.BackSide</code> or <code>THREE.DoubleSide</code>.</p>

<p>Hmm&hellip; this scene is reminding me of being on the London Underground a bit too much, time to add some more shapes!</p>

<h3 id="adding-more-meshes-and-moving-them-around">Adding more meshes and moving them around</h3>

<p>Up to now, we&rsquo;ve been creating objects by making one geometry, one material and one mesh for each. But what if we want to create several shiny spheres? Our current approach seems kind of inefficient, and as we&rsquo;ll see, we can reuse geometries and materials in multiple meshes.</p>

<p>Create a new geometry and a new material under the ring. I&rsquo;m going to use an <a href="https://threejs.org/docs/#api/geometries/OctahedronBufferGeometry">OctahedronBufferGeometry</a>, and a blue material:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">...
  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">ringMesh</span> );

  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaGeometry</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">OctahedronBufferGeometry</span>( <span style="color:#ae81ff">4</span> );

  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaMaterial</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">MeshStandardMaterial</span>( { <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0x0000ff</span> } );
...</code></pre></div>

<p>No need to set the <code>material.side</code> parameter here, the default of <code>THREE.FrontSide</code> is fine. We&rsquo;ll also take the time to understand how colours work soon - like, just why is <code>0x0000ff</code> blue?</p>

<p>We&rsquo;re passing in a single parameter here, the radius of the octahedron (2). Again, this geometry can take other parameters, and you can explore them in the live example on the docs page.</p>

<p>Next, we&rsquo;ll create our first mesh from the <code>octaGeometry</code> and <code>octaMaterial</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">...
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaMaterial</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">MeshStandardMaterial</span>( { <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0x0000ff</span> } );

  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaMesh1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Mesh</span>( <span style="color:#a6e22e">octaGeometry</span>, <span style="color:#a6e22e">octaMaterial</span> );

  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">octaMesh1</span> );
...</code></pre></div>

<p>The problem is, we can&rsquo;t see this. It&rsquo;s been created, as all objects are, at the <code>( 0, 0, 0 )</code> (the <em>origin</em>), and since our cube is already there and is bigger, our poor octahedron is <em>inside</em> the cube, completely hidden. Try zooming the camera slowly in until it is inside the cube, and the octahedron will magically appear.</p>

<p>We need to move our octahedron into its own region of space since it turns out that octahedrons have a bit of an issue with personal space and don&rsquo;t like being put inside cubes against there will. Who knew?</p>

<p>First, let&rsquo;s quickly introduce the three.js coordinate system so that we can see where we standard.</p>

<h4 id="the-three-js-coordinate-system">The three.js coordinate system</h4>


<figure class="figure-small">
    
        <img src="/images/tutorials/coords.jpg" alt="three.js coordinate system" />
    
    
    <figcaption>
        <p>
        Fig 1: The three.js coordinate system
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h5 id="the-x-axis">The x-axis</h5>

<p>The negative x-axis stretches to the left of our screen, and the positive x stretches to the right, which so far is as you would expect</p>

<h5 id="the-y-axis">The y-axis</h5>

<p>The positive y-axis stretches towards the top of your screen, and the negative y-axis goes towards the bottom, and here we web developers hit a point of confusion:</p>

<p>{:.paragraph-notice}
The y-axis in three.js is <em>reversed</em> compared to the y-axis in CSS. That is, the top of the screen it would be labelled <code>+Y</code> in three.js, but <code>-Y</code> in CSS.
This is unfortunate, but three.js had to follow the convention of other 3D applications rather than the convention of web development. The only time it really becomes an issue though is if you are trying to match HTML elements with three.js objects.</p>

<h5 id="the-z-axis">The z-axis</h5>

<p>Positive z points out of the screen towards you, and negative z points into the screen. That&rsquo;s why, to move our camera <em>backwards</em>, we set its z position to 60. Intuitively, you might have thought that to move the camera back you would give it a <em>negative</em> z value. Not so. Remember:</p>

<ul>
<li><code>+Z</code> -&gt; move out of the screen</li>
<li><code>-Z</code> -&gt; move into the screen</li>
</ul>

<p>In our app so far, the camera is positioned on the z-axis, right around where the <code>+ Z</code> label is, and the white box is positioned at the origin, where the three axes meet at (0, 0, 0).</p>

<h4 id="our-first-transformation-translation">Our first transformation: Translation</h4>

<p>Translation is the simplest type of transformation to understand. You just move an object left or right ( along the x-axis ), up or down ( along the y-axis ), or back or forwards (along the z-axis).</p>

<p>Let&rsquo;s move our poor octahedron out of the box:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">...
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaMesh1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Mesh</span>( <span style="color:#a6e22e">octaGeometry</span>, <span style="color:#a6e22e">octaMaterial</span> );

  <span style="color:#a6e22e">octaMesh1</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#f92672">-</span><span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span> ); <span style="color:#75715e">// move 20 units to the left
</span><span style="color:#75715e"></span>
  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">octaMesh1</span> );
...</code></pre></div></p>

<h5 id="transforming-meshes-vs-transforming-geometries">Transforming meshes vs transforming geometries</h5>

<p>If you have looked through the <a href="https://threejs.org/docs/#api/core/BufferGeometry">BufferGeometry</a> docs, you might have noticed that there is a <a href="https://threejs.org/docs/#api/core/BufferGeometry.translate">BufferGeometry.translate</a> method. Why are we translating the mesh instead of translating the geometry directly?</p>

<p>Well, to put it simply, because it is <strong>MUCH</strong> more efficient.
When you transform a geometry, you are applying a transformation to the <code>vertices</code> and <code>normals</code> that make it up, resulting in possibly thousands or even millions of operations, while if you transform a mesh, then you are just updating its position within the scene which is a very quick operation.</p>

<p>We&rsquo;ll cover what all means in more detail in the chapter on geometry, but for now just remember this rule:</p>

<p>{:.notice}
Apply transformations to meshes, not geometries</p>

<h4 id="adding-the-final-octahedrons">Adding the final octahedrons</h4>

<p>Our scene looks a little unbalanced now. Let&rsquo;s add a couple of octahedrons and position them at the other quadrants of the ring.</p>

<p>Add <code>octaMesh2</code> and <code>octaMesh3</code> like so:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">...

  <span style="color:#a6e22e">octaMesh1</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#f92672">-</span><span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span> ); <span style="color:#75715e">// move 20 units to the left
</span><span style="color:#75715e"></span>
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaMesh2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Mesh</span>( <span style="color:#a6e22e">octaGeometry</span>, <span style="color:#a6e22e">octaMaterial</span> );

  <span style="color:#a6e22e">octaMesh2</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span> ); <span style="color:#75715e">// move 20 units to the right
</span><span style="color:#75715e"></span>
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaMesh3</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Mesh</span>( <span style="color:#a6e22e">octaGeometry</span>, <span style="color:#a6e22e">octaMaterial</span> );

  <span style="color:#a6e22e">octaMesh3</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">0</span> ); <span style="color:#75715e">// move 20 units up
</span><span style="color:#75715e"></span>
  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">octaMesh1</span>, <span style="color:#a6e22e">octaMesh2</span>, <span style="color:#a6e22e">octaMesh3</span> );
...</code></pre></div>

<p>Notice that they are all using the same geometry and mesh. Efficient!</p>

<p>For our last octahedron, let&rsquo;s shake things up a little and introduce the <a href="https://threejs.org/docs/#api/objects/Mesh.clone">Mesh.clone()</a> method. Most things in three.js have a clone method which is a quick and efficient way to create multiple copies.</p>

<p>Before we go ahead though, will this also clone the geometry and material, destroying our dreams of efficiency? Let&rsquo;s take a look into the source code - if you scroll down to the very bottom of the <a href="https://threejs.org/docs/#api/objects/Mesh">Mesh</a> docs page, you&rsquo;ll see it has a link to the source code - go ahead and click that now and find the <a href="https://github.com/mrdoob/three.js/blob/master/src/objects/Mesh.js#L391-L395"><code>.clone</code></a> method.</p>

<p>It&rsquo;s pretty simple actually, and we can see that it doesn&rsquo;t clone the geometry and material, just copies them in:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// MESH.CLONE from three.js src
</span><span style="color:#75715e"></span><span style="color:#a6e22e">clone</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {

  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">constructor</span>( <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">geometry</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">material</span> ).<span style="color:#a6e22e">copy</span>( <span style="color:#66d9ef">this</span> );

}</code></pre></div>

<p>The call to <code>.copy( this )</code> at the end just copies in any change we have made to the mesh - in particular, if we have moved or rotated or scaled the mesh, then the cloned mesh will be similarly transformed.</p>

<p>Knowing this, we can confidently go ahead and use clone to create our final octahedron:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">...
  <span style="color:#a6e22e">octaMesh3</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">0</span> ); <span style="color:#75715e">// move 20 units up
</span><span style="color:#75715e"></span>
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">octaMesh4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">octaMesh3</span>.<span style="color:#a6e22e">clone</span>();

  <span style="color:#a6e22e">octaMesh4</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">0</span> ); <span style="color:#75715e">// move 20 units down
</span><span style="color:#75715e"></span>
  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">octaMesh1</span>, <span style="color:#a6e22e">octaMesh2</span>, <span style="color:#a6e22e">octaMesh3</span> );
...</code></pre></div>

<p>Great!</p>

<h4 id="transformation-number-2-scale">Transformation number 2: Scale</h4>

<p>If you look closely, you&rsquo;ll see that the points of the octahedrons don&rsquo;t quite match the outer edge of the ring. Scale is a useful tool for making minor adjustments like this - it&rsquo;s very common that when you are using models from different modelling programs or different artists, they won&rsquo;t quite match up, and will need to be scaled to fit.</p>

<p>In this case, a little trial and error in scaling the ring matches them up quite nicely:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">...
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ringMesh</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">THREE</span>.<span style="color:#a6e22e">Mesh</span>( <span style="color:#a6e22e">ringGeometry</span>, <span style="color:#a6e22e">ringMaterials</span> );

   <span style="color:#a6e22e">ringMesh</span>.<span style="color:#a6e22e">scale</span>.<span style="color:#a6e22e">set</span>( <span style="color:#ae81ff">1.02</span>, <span style="color:#ae81ff">1.02</span>, <span style="color:#ae81ff">1.02</span> );

  <span style="color:#a6e22e">scene</span>.<span style="color:#a6e22e">add</span>( <span style="color:#a6e22e">octaMesh1</span>, <span style="color:#a6e22e">octaMesh2</span>, <span style="color:#a6e22e">octaMesh3</span> );
...</code></pre></div>

<p>This scales the <code>ringMesh</code> by 1.02 along the x-axis, then the y-axis, then the z-axis. That is, it is now 102% of its original size.</p>

<p>The final transformation we need to cover is rotation. It turns out that rotating things in 3D is a bit trickier than scaling or translating them, even though in most cases you won&rsquo;t run into any problems. But since we need to introduce a bit of theory and a couple of new terms, we&rsquo;ll save this for the next chapter.</p>

<p>For now, here&rsquo;s our lovely new logo, which is <em>definitely</em> not a rip off of the London Underground logo.</p>

<p><p data-height="400" data-theme-id="0" data-slug-hash="VyKGXx" data-default-tab="result" class='codepen'></p>
<script async="async" src="//codepen.io/assets/embed/ei.js"></script></p>

      </section>
      <aside>
        <div id="meta">
  <p class="meta-tags">
  <strong><span class="fa fa-fw fa-tags" aria-hidden="true"></span>Tags: </strong>
    <span itemprop="keywords">
      
        <a href="/tags/three.js">three.js,</a> </li>
      
        <a href="/tags/requirements">requirements,</a> </li>
      
        <a href="/tags/webgl">WebGL,</a> </li>
      
        <a href="/tags/codepen">Codepen,</a> </li>
      
        <a href="/tags/browser-console">browser console,</a> </li>
      
        <a href="/tags/html">HTML,</a> </li>
      
    </span>
</p>

  <p class="meta-date">
    <strong>
      <span class="fa fa-fw fa-calendar" aria-hidden="true"></span>
      Updated:
    </strong>
    <time datetime="">
      0001-01-01 00:00:00 &#43;0000 UTC
    </time></p>
  </p>

  <p class="meta-author">
    <strong><span class="fa fa-fw fa-user" aria-hidden="true"></span>Author: </strong><a href="/about" itemprop="author" rel="author">Lewy Blue</a>
  </p>
</div>
      </aside>
      <nav class="pagination">
  
    <a href="https://www.blackthreaddesign.com/tutorials/0-1-github-repo/" title="Three.js on Github">Previous</a>
  
  
    <a href="https://www.blackthreaddesign.com/tutorials/1-2-resize/" title="Resizing the canvas">Next</a>
  
</nav>
      <div class="comments">

  <div class="new-comment">
  <h4>Leave a Comment</h4>

  <p id="comment-submitted-message" class="hide">Thank you! You comment is being vetted and will appear here in a couple of minutes.</p>
  <form method="POST" action="https://api.staticman.net/v2/entry/looeee/blackthread-heroku/master/comments">

    <input name="options[slug]" type="hidden" value="page.slug">
    <input name="options[parent]" type="hidden" value="post_slug">
    <input type="hidden" name="options[origin]" value="page.url">
    <input type="hidden" name="options[redirect]" value="page.url?comment-submitted">

    <label><input name="fields[name]" type="text" placeholder="Name" required></label>
    <label><input name="fields[email]" type="email" placeholder="Email address (will not be made public)" required></label>
    <label>Message<textarea name="fields[message]" required></textarea></label>

    <button type="submit">Submit comment</button>
  </form>

</div>

  <h4 class="comments-title">Previous Comments</h4>

</div>

<script>

  if( window.location.href.indexOf( 'comment-submitted' ) !== -1 ) {

    document.querySelector( '#comment-submitted-message' ).classList.remove( 'hide' );

  }

</script>
    </article>
  </div>
</main>
    
  <footer>
    <div class="footer-social">
      
        <div class="social-icons">
          <a href="https://github.com/looeee/"><span class="fa fa-fw fa-github" aria-hidden="true"></span> GitHub</a>
        </div>
      
      
        <div class="social-icons">
          <a href="https://twitter.com/looeeeb/"><span class="fa fa-fw fa-twitter" aria-hidden="true"></span> Twitter</a>
        </div>
      
      
        <div class="social-icons">
          <a href="https://discourse.threejs.org/u/looeee/"><span class="fa fa-fw fa-commenting" aria-hidden="true"></span> Discourse</a>
        </div>
      
      
        <div class="social-icons">
          <a href="https://www.linkedin.com/in/lewy-blue-30b9b193/"><span class="fa fa-fw fa-linkedin" aria-hidden="true"></span> LinkedIn</a>
        </div>
      
    </div>
    <div class="footer-copyright">&copy; 0001 Lewy Blue.</div>
  </footer>

    




  



  <script async src='https://www.blackthreaddesign.com/js/build/main.js'></script>

  </body>
</html>
