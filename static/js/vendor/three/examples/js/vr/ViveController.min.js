THREE.ViveController=function(t){THREE.Object3D.call(this);var e,o=this,s=[0,0],r=!1,i=!1,n=!1,a=!1;this.matrixAutoUpdate=!1,this.getGamepad=function(){return e},this.getButtonState=function(t){return"thumbpad"===t?r:"trigger"===t?i:"grips"===t?n:"menu"===t?a:void 0},this.update=function(){if(void 0!==(e=function(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),o=0,s=0;o<e.length;o++){var r=e[o];if(r&&("OpenVR Gamepad"===r.id||r.id.startsWith("Oculus Touch")||r.id.startsWith("Spatial Controller"))){if(s===t)return r;s++}}}(t))&&void 0!==e.pose){if(null===e.pose)return;var p=e.pose;null!==p.position&&o.position.fromArray(p.position),null!==p.orientation&&o.quaternion.fromArray(p.orientation),o.matrix.compose(o.position,o.quaternion,o.scale),o.matrixWorldNeedsUpdate=!0,o.visible=!0,s[0]===e.axes[0]&&s[1]===e.axes[1]||(s[0]=e.axes[0],s[1]=e.axes[1],o.dispatchEvent({type:"axischanged",axes:s})),r!==e.buttons[0].pressed&&(r=e.buttons[0].pressed,o.dispatchEvent({type:r?"thumbpaddown":"thumbpadup",axes:s})),i!==e.buttons[1].pressed&&(i=e.buttons[1].pressed,o.dispatchEvent({type:i?"triggerdown":"triggerup"})),n!==e.buttons[2].pressed&&(n=e.buttons[2].pressed,o.dispatchEvent({type:n?"gripsdown":"gripsup"})),a!==e.buttons[3].pressed&&(a=e.buttons[3].pressed,o.dispatchEvent({type:a?"menudown":"menuup"}))}else o.visible=!1}},THREE.ViveController.prototype=Object.create(THREE.Object3D.prototype),THREE.ViveController.prototype.constructor=THREE.ViveController;