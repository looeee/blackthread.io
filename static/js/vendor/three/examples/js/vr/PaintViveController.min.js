THREE.PaintViveController=function(e){THREE.ViveController.call(this,e);var t=2*Math.PI,a={COLOR:0,SIZE:1},r=a.COLOR,o=new THREE.Color(1,1,1),i=1;var n=new THREE.CircleGeometry(1,32),s=new THREE.MeshBasicMaterial({map:function(){var e=document.createElement("canvas");e.width=256,e.height=256;for(var a=e.getContext("2d"),r=a.getImageData(0,0,256,256),o=r.data,i=new THREE.Color,n=0,s=0;n<o.length;n+=4,s++){var E=s%256/256-.5,l=Math.floor(s/256)/256-.5;i.setHSL(Math.atan2(l,E)/t,1,2*(.5-Math.sqrt(E*E+l*l))),o[n+0]=256*i.r,o[n+1]=256*i.g,o[n+2]=256*i.b,o[n+3]=256}return a.putImageData(r,0,0),new THREE.CanvasTexture(e)}()}),E=new THREE.Mesh(n,s);E.position.set(0,.005,.0495),E.rotation.x=-1.45,E.scale.setScalar(.02),this.add(E);n=new THREE.IcosahedronGeometry(.1,2);(s=new THREE.MeshBasicMaterial).color=o;var l=new THREE.Mesh(n,s);E.add(l);var v=new THREE.Group;v.position.set(0,.005,.0495),v.rotation.x=-1.45,v.scale.setScalar(.02),this.add(v);var h=new THREE.Shape;h.moveTo(0,-1),h.lineTo(1,1),h.lineTo(-1,1);n=new THREE.ShapeGeometry(h),s=new THREE.MeshBasicMaterial({color:2236962,wireframe:!0});var c=new THREE.Mesh(n,s);c.position.z=.001,R(c.geometry,1),v.add(c);n=new THREE.ShapeGeometry(h);(s=new THREE.MeshBasicMaterial({side:THREE.DoubleSide})).color=o;var d=new THREE.Mesh(n,s);function R(e,t){var a=Math.atan(.25),r=-.75,o=1.5*t,i=Math.tan(a)*o*2;e.vertices[0].set(0,r,0),e.vertices[1].set(0+i/2,r+o,0),e.vertices[2].set(0-i/2,r+o,0),e.verticesNeedUpdate=!0}d.position.z=.0011,R(d.geometry,.5),v.add(d),v.visible=!1,this.getColor=function(){return o},this.getSize=function(){return i},this.addEventListener("axischanged",function(e){if(!1!==this.getButtonState("thumbpad")){var n=e.axes[0]/2,s=-e.axes[1]/2;if(r===a.COLOR&&(o.setHSL(Math.atan2(s,n)/t,1,2*(.5-Math.sqrt(n*n+s*s))),l.position.set(e.axes[0],e.axes[1],0)),r===a.SIZE){var E=.5-s;i=2*E,R(d.geometry,E)}}}),this.addEventListener("gripsdown",function(e){return r===a.COLOR?(r=a.SIZE,E.visible=!1,void(v.visible=!0)):r===a.SIZE?(r=a.COLOR,E.visible=!0,void(v.visible=!1)):void 0})},THREE.PaintViveController.prototype=Object.create(THREE.ViveController.prototype),THREE.PaintViveController.prototype.constructor=THREE.PaintViveController;