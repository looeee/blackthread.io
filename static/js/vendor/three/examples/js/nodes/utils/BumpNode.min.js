THREE.BumpNode=function(e,t,o){THREE.TempNode.call(this,"v3"),this.value=e,this.coord=t||new THREE.UVNode,this.scale=o||new THREE.Vector2Node(1,1)},THREE.BumpNode.fBumpToNormal=new THREE.FunctionNode(["vec3 bumpToNormal( sampler2D bumpMap, vec2 uv, vec2 scale ) {","\tvec2 dSTdx = dFdx( uv );","\tvec2 dSTdy = dFdy( uv );","\tfloat Hll = texture2D( bumpMap, uv ).x;","\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;","\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;","\treturn vec3( .5 + ( dBx * scale.x ), .5 + ( dBy * scale.y ), 1.0 );","}"].join("\n"),null,{derivatives:!0}),THREE.BumpNode.prototype=Object.create(THREE.TempNode.prototype),THREE.BumpNode.prototype.constructor=THREE.BumpNode,THREE.BumpNode.prototype.nodeType="Bump",THREE.BumpNode.prototype.generate=function(e,t){e.material;var o=THREE.BumpNode.fBumpToNormal;return e.include(o),e.isShader("fragment")?e.format(o.name+"("+this.value.build(e,"sampler2D")+","+this.coord.build(e,"v2")+","+this.scale.build(e,"v2")+")",this.getType(e),t):(console.warn("THREE.BumpNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t))},THREE.BumpNode.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.coord=this.coord.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t};