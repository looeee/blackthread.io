THREE.NormalMapNode=function(o,e,t,a,r){THREE.TempNode.call(this,"v3"),this.value=o,this.scale=t||new THREE.FloatNode(1),this.normal=a||new THREE.NormalNode(THREE.NormalNode.LOCAL),this.position=r||new THREE.PositionNode(THREE.NormalNode.VIEW)},THREE.NormalMapNode.prototype=Object.create(THREE.TempNode.prototype),THREE.NormalMapNode.prototype.constructor=THREE.NormalMapNode,THREE.NormalMapNode.prototype.nodeType="NormalMap",THREE.NormalMapNode.prototype.generate=function(o,e){o.material;return o.include("perturbNormal2Arb"),o.isShader("fragment")?o.format("perturbNormal2Arb(-"+this.position.build(o,"v3")+","+this.normal.build(o,"v3")+","+this.value.build(o,"v3")+","+this.value.coord.build(o,"v2")+","+this.scale.build(o,"v2")+")",this.getType(o),e):(console.warn("THREE.NormalMapNode is not compatible with "+o.shader+" shader."),o.format("vec3( 0.0 )",this.getType(o),e))},THREE.NormalMapNode.prototype.toJSON=function(o){var e=this.getJSONNode(o);return e||((e=this.createJSONNode(o)).value=this.value.uuid,e.scale=this.scale.toJSON(o).uuid,e.normal=this.normal.toJSON(o).uuid,e.position=this.position.toJSON(o).uuid),e};