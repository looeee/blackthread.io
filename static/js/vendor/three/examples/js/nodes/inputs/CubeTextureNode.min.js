THREE.CubeTextureNode=function(e,t,o){THREE.InputNode.call(this,"v4",{shared:!0}),this.value=e,this.coord=t||new THREE.ReflectNode,this.bias=o},THREE.CubeTextureNode.prototype=Object.create(THREE.InputNode.prototype),THREE.CubeTextureNode.prototype.constructor=THREE.CubeTextureNode,THREE.CubeTextureNode.prototype.nodeType="CubeTexture",THREE.CubeTextureNode.prototype.getTexture=function(e,t){return THREE.InputNode.prototype.generate.call(this,e,t,this.value.uuid,"t")},THREE.CubeTextureNode.prototype.generate=function(e,t){if("samplerCube"===t)return this.getTexture(e,t);var o,i=this.getTexture(e,t),u=this.coord.build(e,"v3"),r=this.bias?this.bias.build(e,"fv1"):void 0;return void 0==r&&e.requires.bias&&(r=e.requires.bias.build(e,"fv1")),o=r?"texCubeBias("+i+","+u+","+r+")":"texCube("+i+","+u+")",e.isSlot("color")?o="mapTexelToLinear("+o+")":e.isSlot("emissive")?o="emissiveMapTexelToLinear("+o+")":e.isSlot("environment")&&(o="envMapTexelToLinear("+o+")"),e.format(o,this.type,t)},THREE.CubeTextureNode.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.uuid,t.coord=this.coord.toJSON(e).uuid,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t};