THREE.TextureNode=function(e,t,o,i){THREE.InputNode.call(this,"v4",{shared:!0}),this.value=e,this.coord=t||new THREE.UVNode,this.bias=o,this.project=void 0!==i&&i},THREE.TextureNode.prototype=Object.create(THREE.InputNode.prototype),THREE.TextureNode.prototype.constructor=THREE.TextureNode,THREE.TextureNode.prototype.nodeType="Texture",THREE.TextureNode.prototype.getTexture=function(e,t){return THREE.InputNode.prototype.generate.call(this,e,t,this.value.uuid,"t")},THREE.TextureNode.prototype.generate=function(e,t){if("sampler2D"===t)return this.getTexture(e,t);var o,i,r=this.getTexture(e,t),s=this.coord.build(e,this.project?"v4":"v2"),u=this.bias?this.bias.build(e,"fv1"):void 0;return void 0==u&&e.requires.bias&&(u=e.requires.bias.build(e,"fv1")),o=this.project?"texture2DProj":u?"tex2DBias":"tex2D",i=u?o+"("+r+","+s+","+u+")":o+"("+r+","+s+")",e.isSlot("color")?i="mapTexelToLinear("+i+")":e.isSlot("emissive")?i="emissiveMapTexelToLinear("+i+")":e.isSlot("environment")&&(i="envMapTexelToLinear("+i+")"),e.format(i,this.type,t)},THREE.TextureNode.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.uuid),t.coord=this.coord.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t};