THREE.CameraNode=function(e,a){THREE.TempNode.call(this,"v3"),this.setScope(e||THREE.CameraNode.POSITION),this.setCamera(a)},THREE.CameraNode.fDepthColor=new THREE.FunctionNode(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n")),THREE.CameraNode.POSITION="position",THREE.CameraNode.DEPTH="depth",THREE.CameraNode.TO_VERTEX="toVertex",THREE.CameraNode.prototype=Object.create(THREE.TempNode.prototype),THREE.CameraNode.prototype.constructor=THREE.CameraNode,THREE.CameraNode.prototype.nodeType="Camera",THREE.CameraNode.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},THREE.CameraNode.prototype.setScope=function(e){switch(this.scope){case THREE.CameraNode.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case THREE.CameraNode.DEPTH:var a=this.camera;this.near=new THREE.FloatNode(a?a.near:1),this.far=new THREE.FloatNode(a?a.far:1200)}},THREE.CameraNode.prototype.getType=function(e){switch(this.scope){case THREE.CameraNode.DEPTH:return"fv1"}return this.type},THREE.CameraNode.prototype.isUnique=function(e){switch(this.scope){case THREE.CameraNode.DEPTH:case THREE.CameraNode.TO_VERTEX:return!0}return!1},THREE.CameraNode.prototype.isShared=function(e){switch(this.scope){case THREE.CameraNode.POSITION:return!1}return!0},THREE.CameraNode.prototype.generate=function(e,a){var t;e.material;switch(this.scope){case THREE.CameraNode.POSITION:t="cameraPosition";break;case THREE.CameraNode.DEPTH:var o=THREE.CameraNode.fDepthColor;e.include(o),t=o.name+"("+this.near.build(e,"fv1")+","+this.far.build(e,"fv1")+")";break;case THREE.CameraNode.TO_VERTEX:t="normalize( "+new THREE.PositionNode(THREE.PositionNode.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(t,this.getType(e),a)},THREE.CameraNode.prototype.onUpdateFrame=function(e){switch(this.scope){case THREE.CameraNode.DEPTH:var a=this.camera;this.near.number=a.near,this.far.number=a.far}},THREE.CameraNode.prototype.toJSON=function(e){var a=this.getJSONNode(e);if(!a)switch((a=this.createJSONNode(e)).scope=this.scope,this.camera&&(a.camera=this.camera.uuid),this.scope){case THREE.CameraNode.DEPTH:a.near=this.near.number,a.far=this.far.number}return a};