function generateGeometry(e,t){var r=new THREE.Geometry;function n(e,t){e.faces.forEach(function(e){for(var r=e instanceof THREE.Face3?3:4,n=0;n<r;n++)e.vertexColors[n]=t})}for(var o=0;o<t;o++){var a=new THREE.Vector3;a.x=1e4*Math.random()-5e3,a.y=6e3*Math.random()-3e3,a.z=8e3*Math.random()-4e3;var i=new THREE.Euler;i.x=2*Math.random()*Math.PI,i.y=2*Math.random()*Math.PI,i.z=2*Math.random()*Math.PI;var h,s=new THREE.Vector3,E=new THREE.Color;s.x=200*Math.random()+100,"cube"==e?(h=new THREE.BoxGeometry(1,1,1),s.y=200*Math.random()+100,s.z=200*Math.random()+100,E.setRGB(0,0,Math.random()+.1)):"sphere"==e&&(h=new THREE.IcosahedronGeometry(1,1),s.y=s.z=s.x,E.setRGB(Math.random()+.1,0,0)),n(h,E);var d=new THREE.Mesh(h);d.position.copy(a),d.rotation.copy(i),d.scale.copy(s),d.updateMatrix(),r.merge(d.geometry,d.matrix)}return r}function Scene(e,t,r,n,o,a){this.clearColor=a,this.camera=new THREE.PerspectiveCamera(n,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=r,this.scene=new THREE.Scene,this.scene.add(new THREE.AmbientLight(5592405));var i=new THREE.SpotLight(16777215,1.5);i.position.set(0,500,2e3),this.scene.add(i),this.rotationSpeed=o;var h=new THREE.MeshPhongMaterial({color:16777215,flatShading:!0,vertexColors:THREE.VertexColors});this.mesh=new THREE.Mesh(generateGeometry(e,t),h),this.scene.add(this.mesh);var s={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};this.fbo=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,s),this.render=function(e,t){this.mesh.rotation.x+=e*this.rotationSpeed.x,this.mesh.rotation.y+=e*this.rotationSpeed.y,this.mesh.rotation.z+=e*this.rotationSpeed.z,renderer.setClearColor(this.clearColor),t?renderer.render(this.scene,this.camera,this.fbo,!0):renderer.render(this.scene,this.camera)}}