THREE.SubdivisionModifier=function(e){this.subdivisions=void 0===e?1:e},THREE.SubdivisionModifier.prototype.modify=function(e){for(var n=this.subdivisions;n-- >0;)this.smooth(e);e.computeFaceNormals(),e.computeVertexNormals()},function(){var e=["a","b","c"];function n(e,n,t){return t[Math.min(e,n)+"_"+Math.max(e,n)]}function t(e,n,t,a,o,i){var c,r=Math.min(e,n),s=Math.max(e,n),f=r+"_"+s;f in a?c=a[f]:(c={a:t[r],b:t[s],newEdge:null,faces:[]},a[f]=c);c.faces.push(o),i[e].edges.push(c),i[n].edges.push(c)}function a(e,n,t,a){e.push(new THREE.Face3(n,t,a))}function o(e,n){return Math.abs(n-e)/2+Math.min(e,n)}function i(e,n,t,a){e.push([n.clone(),t.clone(),a.clone()])}THREE.SubdivisionModifier.prototype.smooth=function(c){var r,s,f,u,d,l,h,E,g,v,p,b,m,y,w=new THREE.Vector3,x=[];r=c.vertices,s=c.faces;var H,M,R,T,V,S,F,N,U,_,A,j,k,q,z=void 0!==(f=c.faceVertexUvs[0])&&f.length>0;for(h in function(e,n,a,o){var i,c,r;for(i=0,c=e.length;i<c;i++)a[i]={edges:[]};for(i=0,c=n.length;i<c;i++)t((r=n[i]).a,r.b,e,o,r,a),t(r.b,r.c,e,o,r,a),t(r.c,r.a,e,o,r,a)}(r,s,p=new Array(r.length),b={}),m=[],b){for(M=b[h],R=new THREE.Vector3,V=3/8,S=1/8,2!=(F=M.faces.length)&&(V=.5,S=0),R.addVectors(M.a,M.b).multiplyScalar(V),w.set(0,0,0),g=0;g<F;g++){for(T=M.faces[g],v=0;v<3&&((H=r[T[e[v]]])===M.a||H===M.b);v++);w.add(H)}w.multiplyScalar(S),R.add(w),M.newEdge=m.length,m.push(R)}for(y=[],h=0,E=r.length;h<E;h++){for(k=r[h],3==(l=(j=p[h].edges).length)?N=3/16:l>3&&(N=3/(8*l)),U=1-l*N,_=N,l<=2&&2==l&&(U=.75,_=1/8),q=k.clone().multiplyScalar(U),w.set(0,0,0),g=0;g<l;g++)H=(A=j[g]).a!==k?A.a:A.b,w.add(H);w.multiplyScalar(_),q.add(w),y.push(q)}u=y.concat(m);var B,C,D,G,I,J,K,L=y.length;d=[];var O=new THREE.Vector2,P=new THREE.Vector2,Q=new THREE.Vector2;for(h=0,E=s.length;h<E;h++)a(d,B=n((T=s[h]).a,T.b,b).newEdge+L,C=n(T.b,T.c,b).newEdge+L,D=n(T.c,T.a,b).newEdge+L),a(d,T.a,B,D),a(d,T.b,C,B),a(d,T.c,D,C),z&&(I=(G=f[h])[0],J=G[1],K=G[2],O.set(o(I.x,J.x),o(I.y,J.y)),P.set(o(J.x,K.x),o(J.y,K.y)),Q.set(o(I.x,K.x),o(I.y,K.y)),i(x,O,P,Q),i(x,I,O,Q),i(x,J,P,O),i(x,K,Q,P));c.vertices=u,c.faces=d,z&&(c.faceVertexUvs[0]=x)}}();