THREE.BufferGeometryUtils={computeTangents:function(r){var t=r.index,e=r.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=t.array,a=e.position.array,o=e.normal.array,u=e.uv.array,i=a.length/3;void 0===e.tangent&&r.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*i),4));for(var s=e.tangent.array,f=[],l=[],d=0;d<i;d++)f[d]=new THREE.Vector3,l[d]=new THREE.Vector3;var v=new THREE.Vector3,c=new THREE.Vector3,m=new THREE.Vector3,E=new THREE.Vector2,y=new THREE.Vector2,h=new THREE.Vector2,g=new THREE.Vector3,b=new THREE.Vector3,A=r.groups;0===A.length&&(A=[{start:0,count:n.length}]);for(var p=0,w=A.length;p<w;++p)for(var T=U=(S=A[p]).start,H=U+S.count;T<H;T+=3)k(n[T+0],n[T+1],n[T+2]);var R,x,V,B=new THREE.Vector3,z=new THREE.Vector3,D=new THREE.Vector3,G=new THREE.Vector3;for(p=0,w=A.length;p<w;++p){var S,U;for(T=U=(S=A[p]).start,H=U+S.count;T<H;T+=3)j(n[T+0]),j(n[T+1]),j(n[T+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function k(r,t,e){v.fromArray(a,3*r),c.fromArray(a,3*t),m.fromArray(a,3*e),E.fromArray(u,2*r),y.fromArray(u,2*t),h.fromArray(u,2*e);var n=c.x-v.x,o=m.x-v.x,i=c.y-v.y,s=m.y-v.y,d=c.z-v.z,A=m.z-v.z,p=y.x-E.x,w=h.x-E.x,T=y.y-E.y,H=h.y-E.y,R=1/(p*H-w*T);g.set((H*n-T*o)*R,(H*i-T*s)*R,(H*d-T*A)*R),b.set((p*o-w*n)*R,(p*s-w*i)*R,(p*A-w*d)*R),f[r].add(g),f[t].add(g),f[e].add(g),l[r].add(b),l[t].add(b),l[e].add(b)}function j(r){D.fromArray(o,3*r),G.copy(D),x=f[r],B.copy(x),B.sub(D.multiplyScalar(D.dot(x))).normalize(),z.crossVectors(G,x),V=z.dot(l[r]),R=V<0?-1:1,s[4*r]=B.x,s[4*r+1]=B.y,s[4*r+2]=B.z,s[4*r+3]=R}},mergeBufferGeometries:function(r){for(var t=null!==r[0].index,e=new Set(Object.keys(r[0].attributes)),n=new Set(Object.keys(r[0].morphAttributes)),a={},o={},u=new THREE.BufferGeometry,i=0;i<r.length;++i){var s=r[i];if(t!==(null!==s.index))return null;for(var f in s.attributes){if(!e.has(f))return null;void 0===a[f]&&(a[f]=[]),a[f].push(s.attributes[f])}for(var f in s.morphAttributes){if(!n.has(f))return null;void 0===o[f]&&(o[f]=[]),o[f].push(s.morphAttributes[f])}void 0!==s.userData&&(u.userData=u.userData||{},u.userData.mergedUserData=u.userData.mergedUserData||[],u.userData.mergedUserData.push(s.userData))}if(t){var l=0,d=[];for(i=0;i<r.length;++i){var v=r[i].index;if(l>0){v=v.clone();for(var c=0;c<v.count;++c)v.setX(c,v.getX(c)+l)}d.push(v),l+=r[i].attributes.position.count}var m=this.mergeBufferAttributes(d);if(!m)return null;u.index=m}for(var f in a){var E=this.mergeBufferAttributes(a[f]);if(!E)return null;u.addAttribute(f,E)}for(var f in o){var y=o[f][0].length;if(0===y)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[f]=[];for(i=0;i<y;++i){var h=[];for(c=0;c<o[f].length;++c)h.push(o[f][c][i]);var g=this.mergeBufferAttributes(h);if(!g)return null;u.morphAttributes[f].push(g)}}return u},mergeBufferAttributes:function(r){for(var t,e,n,a=0,o=0;o<r.length;++o){var u=r[o];if(u.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=u.array.constructor),t!==u.array.constructor)return null;if(void 0===e&&(e=u.itemSize),e!==u.itemSize)return null;if(void 0===n&&(n=u.normalized),n!==u.normalized)return null;a+=u.array.length}for(var i=new t(a),s=0,f=0;f<r.length;++f)i.set(r[f].array,s),s+=r[f].array.length;return new THREE.BufferAttribute(i,e,n)}};