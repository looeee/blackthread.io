var camera,scene,renderer,mesh,clock;function init(e,a,n,r){(camera=new THREE.PerspectiveCamera(70,a/n,1,1e3)).position.z=400,scene=new THREE.Scene,clock=new THREE.Clock,(new THREE.ImageBitmapLoader).load("../../textures/crate.gif",function(e){var a=new THREE.CanvasTexture(e),n=new THREE.MeshBasicMaterial({map:a}),r=new THREE.BoxBufferGeometry(200,200,200);mesh=new THREE.Mesh(r,n),scene.add(mesh),animate()}),(renderer=new THREE.WebGLRenderer({antialias:!0,canvas:e})).setPixelRatio(r),renderer.setSize(a,n,!1)}function animate(){var e=clock.getDelta();mesh.rotation.x+=.2*e,mesh.rotation.y+=.5*e,renderer.render(scene,camera),renderer.context.commit().then(animate)}self.importScripts("../../../build/three.js"),self.onmessage=function(e){var a=e.data;init(a.drawingSurface,a.width,a.height,a.pixelRatio)};