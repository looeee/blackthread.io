!function(){function t(t,e,n,r){THREE.BufferGeometry.call(this);var i=[],s=[],p=[],u=new THREE.Vector3,a=new THREE.Matrix4;a.makeRotationFromEuler(n),a.setPosition(e);var l=(new THREE.Matrix4).getInverse(a);function c(e,n,r){n.applyMatrix4(t.matrix),n.applyMatrix4(l),e.push(new o(n.clone(),r.clone()))}function h(t,o){for(var e=[],n=.5*Math.abs(r.dot(o)),i=0;i<t.length;i+=3){var s,p,u,a,l,c,h,m=t[i+0].position.dot(o)-n;switch(p=t[i+1].position.dot(o)-n>0,u=t[i+2].position.dot(o)-n>0,((s=m>0)?1:0)+(p?1:0)+(u?1:0)){case 0:e.push(t[i]),e.push(t[i+1]),e.push(t[i+2]);break;case 1:if(s&&(a=t[i+1],l=t[i+2],c=f(t[i],a,o,n),h=f(t[i],l,o,n)),p){a=t[i],l=t[i+2],c=f(t[i+1],a,o,n),h=f(t[i+1],l,o,n),e.push(c),e.push(l.clone()),e.push(a.clone()),e.push(l.clone()),e.push(c.clone()),e.push(h);break}u&&(a=t[i],l=t[i+1],c=f(t[i+2],a,o,n),h=f(t[i+2],l,o,n)),e.push(a.clone()),e.push(l.clone()),e.push(c),e.push(h),e.push(c.clone()),e.push(l.clone());break;case 2:s||(l=f(a=t[i].clone(),t[i+1],o,n),c=f(a,t[i+2],o,n),e.push(a),e.push(l),e.push(c)),p||(l=f(a=t[i+1].clone(),t[i+2],o,n),c=f(a,t[i],o,n),e.push(a),e.push(l),e.push(c)),u||(l=f(a=t[i+2].clone(),t[i],o,n),c=f(a,t[i+1],o,n),e.push(a),e.push(l),e.push(c))}}return e}function f(t,e,n,r){var i=t.position.dot(n)-r,s=i/(i-(e.position.dot(n)-r));return new o(new THREE.Vector3(t.position.x+s*(e.position.x-t.position.x),t.position.y+s*(e.position.y-t.position.y),t.position.z+s*(e.position.z-t.position.z)),new THREE.Vector3(t.normal.x+s*(e.normal.x-t.normal.x),t.normal.y+s*(e.normal.y-t.normal.y),t.normal.z+s*(e.normal.z-t.normal.z)))}!function(){var o,e=new THREE.BufferGeometry,n=[],l=new THREE.Vector3,f=new THREE.Vector3;t.geometry.isGeometry?e.fromGeometry(t.geometry):e.copy(t.geometry);var m=e.attributes.position,E=e.attributes.normal;if(null!==e.index){var y=e.index;for(o=0;o<y.count;o++)l.fromBufferAttribute(m,y.getX(o)),f.fromBufferAttribute(E,y.getX(o)),c(n,l,f)}else for(o=0;o<m.count;o++)l.fromBufferAttribute(m,o),f.fromBufferAttribute(E,o),c(n,l,f);for(n=h(n=h(n=h(n=h(n=h(n=h(n,u.set(1,0,0)),u.set(-1,0,0)),u.set(0,1,0)),u.set(0,-1,0)),u.set(0,0,1)),u.set(0,0,-1)),o=0;o<n.length;o++){var x=n[o];p.push(.5+x.position.x/r.x,.5+x.position.y/r.y),x.position.applyMatrix4(a),i.push(x.position.x,x.position.y,x.position.z),s.push(x.normal.x,x.normal.y,x.normal.z)}}(),this.addAttribute("position",new THREE.Float32BufferAttribute(i,3)),this.addAttribute("normal",new THREE.Float32BufferAttribute(s,3)),this.addAttribute("uv",new THREE.Float32BufferAttribute(p,2))}function o(t,o){this.position=t,this.normal=o}t.prototype=Object.create(THREE.BufferGeometry.prototype),t.prototype.constructor=t,o.prototype.clone=function(){return new o(this.position.clone(),this.normal.clone())},THREE.DecalGeometry=t}();