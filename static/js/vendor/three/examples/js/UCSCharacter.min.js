THREE.UCSCharacter=function(){var t,o=this;this.scale=1,this.root=new THREE.Object3D,this.numSkins=void 0,this.numMorphs=void 0,this.skins=[],this.materials=[],this.morphs=[],this.mixer=new THREE.AnimationMixer(this.root),this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(e){this.numSkins=e.skins.length,this.numMorphs=e.morphs.length,this.loadCounter=1+e.skins.length,this.skins=function(t,e){for(var s=new THREE.TextureLoader,n=[],i=0;i<e.length;i++)n[i]=s.load(t+e[i],o.checkLoadComplete),n[i].mapping=THREE.UVMapping,n[i].name=e[i];return n}(e.baseUrl+"skins/",e.skins),this.materials=function(t){for(var o=[],e=0;e<t.length;e++)o[e]=new THREE.MeshLambertMaterial({color:15658734,specular:10,map:t[e],skinning:!0,morphTargets:!0});return o}(this.skins),this.morphs=e.morphs;var s=new THREE.JSONLoader;console.log(e.baseUrl+e.character),s.load(e.baseUrl+e.character,function(s){s.computeBoundingBox(),s.computeVertexNormals(),(t=new THREE.SkinnedMesh(s,[])).name=e.character,o.root.add(t);var n=s.boundingBox;o.root.scale.set(e.s,e.s,e.s),o.root.position.set(e.x,e.y-n.min.y*e.s,e.z),t.castShadow=!0,t.receiveShadow=!0,o.mixer.clipAction(s.animations[0],t).play(),o.setSkin(0),o.checkLoadComplete()})},this.setSkin=function(e){t&&o.materials&&(t.material=o.materials[e])},this.updateMorphs=function(e){if(t)for(var s=0;s<o.numMorphs;s++)t.morphTargetInfluences[s]=e[o.morphs[s]]/100},this.checkLoadComplete=function(){o.loadCounter-=1,0===o.loadCounter&&o.onLoadComplete()}};