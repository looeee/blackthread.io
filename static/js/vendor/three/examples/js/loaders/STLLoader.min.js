THREE.STLLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(t,e,r,a){var n=this,o=new THREE.FileLoader(n.manager);o.setResponseType("arraybuffer"),o.load(t,function(t){try{e(n.parse(t))}catch(t){a&&a(t)}},r,a)},parse:function(t){var e,r=function(t){if("string"==typeof t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=255&t.charCodeAt(r);return e.buffer||e}return t}(t);return function(t){var e;if(84+50*(e=new DataView(t)).getUint32(80,!0)===e.byteLength)return!0;for(var r=[115,111,108,105,100],a=0;a<5;a++)if(r[a]!=e.getUint8(a,!1))return!0;return!1}(r)?function(t){for(var e,r,a,n,o,i,u,f,l=new DataView(t),s=l.getUint32(80,!0),g=!1,E=0;E<70;E++)1129270351==l.getUint32(E,!1)&&82==l.getUint8(E+4)&&61==l.getUint8(E+5)&&(g=!0,n=[],o=l.getUint8(E+6)/255,i=l.getUint8(E+7)/255,u=l.getUint8(E+8)/255,f=l.getUint8(E+9)/255);for(var d=new THREE.BufferGeometry,c=[],p=[],h=0;h<s;h++){var T=84+50*h,w=l.getFloat32(T,!0),R=l.getFloat32(T+4,!0),F=l.getFloat32(T+8,!0);if(g){var v=l.getUint16(T+48,!0);0==(32768&v)?(e=(31&v)/31,r=(v>>5&31)/31,a=(v>>10&31)/31):(e=o,r=i,a=u)}for(var y=1;y<=3;y++){var A=T+12*y;c.push(l.getFloat32(A,!0)),c.push(l.getFloat32(A+4,!0)),c.push(l.getFloat32(A+8,!0)),p.push(w,R,F),g&&n.push(e,r,a)}}return d.addAttribute("position",new THREE.BufferAttribute(new Float32Array(c),3)),d.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(p),3)),g&&(d.addAttribute("color",new THREE.BufferAttribute(new Float32Array(n),3)),d.hasColors=!0,d.alpha=f),d}(r):function(t){for(var e,r=new THREE.BufferGeometry,a=/facet([\s\S]*?)endfacet/g,n=0,o=/[\s]+([+-]?(?:\d+.\d+|\d+.|\d+|.\d+)(?:[eE][+-]?\d+)?)/.source,i=new RegExp("vertex"+o+o+o,"g"),u=new RegExp("normal"+o+o+o,"g"),f=[],l=[],s=new THREE.Vector3;null!==(e=a.exec(t));){for(var g=0,E=0,d=e[0];null!==(e=u.exec(d));)s.x=parseFloat(e[1]),s.y=parseFloat(e[2]),s.z=parseFloat(e[3]),E++;for(;null!==(e=i.exec(d));)f.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),l.push(s.x,s.y,s.z),g++;1!==E&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+n),3!==g&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+n),n++}return r.addAttribute("position",new THREE.Float32BufferAttribute(f,3)),r.addAttribute("normal",new THREE.Float32BufferAttribute(l,3)),r}("string"!=typeof(e=t)?THREE.LoaderUtils.decodeText(new Uint8Array(e)):e)}};