THREE.ParametricGeometries={klein:function(t,e,r){var o,a,s,i=r||new THREE.Vector3;return e*=Math.PI,t*=2*Math.PI,(e*=2)<Math.PI?(o=3*Math.cos(e)*(1+Math.sin(e))+2*(1-Math.cos(e)/2)*Math.cos(e)*Math.cos(t),s=-8*Math.sin(e)-2*(1-Math.cos(e)/2)*Math.sin(e)*Math.cos(t)):(o=3*Math.cos(e)*(1+Math.sin(e))+2*(1-Math.cos(e)/2)*Math.cos(t+Math.PI),s=-8*Math.sin(e)),a=-2*(1-Math.cos(e)/2)*Math.sin(t),i.set(o,a,s)},plane:function(t,e){return function(r,o,a){var s=a||new THREE.Vector3,i=r*t,n=o*e;return s.set(i,0,n)}},mobius:function(t,e,r){var o=r||new THREE.Vector3;t-=.5;var a,s,i,n=2*Math.PI*e;return a=Math.cos(n)*(2+t*Math.cos(n/2)),s=Math.sin(n)*(2+t*Math.cos(n/2)),i=t*Math.sin(n/2),o.set(a,s,i)},mobius3d:function(t,e,r){var o=r||new THREE.Vector3;t*=Math.PI,e*=2*Math.PI;var a,s,i,n=(t*=2)/2;return a=.125*Math.cos(e)*Math.cos(n)-.65*Math.sin(e)*Math.sin(n),i=.125*Math.cos(e)*Math.sin(n)+.65*Math.sin(e)*Math.cos(n),s=(2.25+a)*Math.sin(t),a=(2.25+a)*Math.cos(t),o.set(a,s,i)}},THREE.ParametricGeometries.TubeGeometry=function(t,e,r,o,a,s){this.path=t,this.segments=e||64,this.radius=r||1,this.segmentsRadius=o||8,this.closed=a||!1,s&&(this.debug=new THREE.Object3D);var i=this,n=this.segments+1,c=t.computeFrenetFrames(e,a),h=c.tangents,E=c.normals,m=c.binormals;this.tangents=h,this.normals=E,this.binormals=m;THREE.ParametricGeometry.call(this,function(e,o,a){var s=a||new THREE.Vector3;o*=2*Math.PI;var c=e*(n-1);c=Math.floor(c);var M=t.getPointAt(e),u=h[c],T=E[c],p=m[c];i.debug&&(i.debug.add(new THREE.ArrowHelper(u,M,r,255)),i.debug.add(new THREE.ArrowHelper(T,M,r,16711680)),i.debug.add(new THREE.ArrowHelper(p,M,r,65280)));var y=-i.radius*Math.cos(o),G=i.radius*Math.sin(o);return M.x+=y*T.x+G*p.x,M.y+=y*T.y+G*p.y,M.z+=y*T.z+G*p.z,s.copy(M)},e,o)},THREE.ParametricGeometries.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.TubeGeometry.prototype.constructor=THREE.ParametricGeometries.TubeGeometry,THREE.ParametricGeometries.TorusKnotGeometry=function(t,e,r,o,a,s){function i(){THREE.Curve.call(this)}this.radius=t||200,this.tube=e||40,this.segmentsT=r||64,this.segmentsR=o||8,this.p=a||2,this.q=s||3,i.prototype=Object.create(THREE.Curve.prototype),i.prototype.constructor=i,i.prototype.getPoint=function(e,r){var o=r||new THREE.Vector3;e*=2*Math.PI;var i=(1+.5*Math.cos(s*e))*Math.cos(a*e),n=(1+.5*Math.cos(s*e))*Math.sin(a*e),c=.5*Math.sin(s*e);return o.set(i,n,c).multiplyScalar(t)};var n=r,c=o,h=new i;THREE.ParametricGeometries.TubeGeometry.call(this,h,n,e,c,!0,!1)},THREE.ParametricGeometries.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.TorusKnotGeometry.prototype.constructor=THREE.ParametricGeometries.TorusKnotGeometry,THREE.ParametricGeometries.SphereGeometry=function(t,e,r){THREE.ParametricGeometry.call(this,function(e,r,o){var a=o||new THREE.Vector3;e*=Math.PI,r*=2*Math.PI;var s=t*Math.sin(e)*Math.cos(r),i=t*Math.sin(e)*Math.sin(r),n=t*Math.cos(e);return a.set(s,i,n)},e,r)},THREE.ParametricGeometries.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.SphereGeometry.prototype.constructor=THREE.ParametricGeometries.SphereGeometry,THREE.ParametricGeometries.PlaneGeometry=function(t,e,r,o){THREE.ParametricGeometry.call(this,function(r,o,a){var s=a||new THREE.Vector3,i=r*t,n=o*e;return s.set(i,0,n)},r,o)},THREE.ParametricGeometries.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.PlaneGeometry.prototype.constructor=THREE.ParametricGeometries.PlaneGeometry;