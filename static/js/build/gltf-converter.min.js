this["gltf-converter"]=this["gltf-converter"]||{},function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),o=document.querySelector("#original-preview-canvas"),i=document.querySelector("#result-preview-canvas"),r=document.querySelector("#previews"),a=document.querySelector("#fullscreen-button"),s=document.querySelector("#messages"),l=document.querySelector("#errors"),c=document.querySelector("#errors-container"),u=document.querySelector("#warnings"),d=document.querySelector("#warnings-container"),h=document.querySelector("#logs"),f=document.querySelector("#logs-container"),p={input:document.querySelector("#file-upload-input"),button:document.querySelector("#file-upload-button"),form:document.querySelector("#file-upload-form")},m={original:{bar:document.querySelector("#original-loading-bar"),overlay:document.querySelector("#original-loading-overlay"),progress:document.querySelector("#original-progress")},result:{bar:document.querySelector("#result-loading-bar"),overlay:document.querySelector("#result-loading-overlay"),progress:document.querySelector("#result-progress")}},v={trs:document.querySelector("#option_trs"),onlyVisible:document.querySelector("#option_visible"),truncateDrawRange:document.querySelector("#option_drawrange"),binary:document.querySelector("#option_binary"),embedImages:document.querySelector("#option_embedImages"),animations:document.querySelector("#option_animations"),exportGLTF:document.querySelector("#export")},g=function(){function e(){t(this,e)}return n(e,null,[{key:"setInitialState",value:function(){v.exportGLTF.disabled=!0,m.original.overlay.classList.remove("hide"),m.result.overlay.classList.remove("hide"),m.original.bar.classList.add("hide"),m.original.progress.style.width=0,m.result.bar.classList.add("hide"),m.result.progress.style.width=0}},{key:"setOnLoadStartState",value:function(){v.exportGLTF.disabled=!0,m.result.overlay.classList.remove("hide"),m.original.bar.classList.remove("hide"),s.classList.add("hide"),c.classList.add("hide"),d.classList.add("hide"),f.classList.add("hide"),l.innerHTML="",u.innerHTML="",h.innerHTML=""}},{key:"setOnLoadEndState",value:function(){m.original.overlay.classList.add("hide")}}]),e}();g.originalCanvas=o,g.resultCanvas=i,g.fileUpload=p,g.loading=m,g.controls=v,g.previews=r,g.fullscreenButton=a,g.messages=s,g.errorsContainer=c,g.errors=l,g.warningsContainer=d,g.warnings=u,g.logsContainer=f,g.logs=h;var y=console.warn.bind(console);function L(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.slice(1,t.length),i=0;return"string"==typeof t[0]?t[0].replace(/%s/g,function(e,t){return o.slice(i,++i)}):t[0]}console.error=function(){var e=L.apply(void 0,arguments);if(e){g.messages.classList.remove("hide"),g.errorsContainer.classList.remove("hide");var t=document.createElement("p");t.innerHTML=e,g.errors.append(t),y.apply(void 0,arguments)}};var w=console.warn.bind(console);console.warn=function(){var e=L.apply(void 0,arguments);if(e){g.messages.classList.remove("hide"),g.warningsContainer.classList.remove("hide");var t=document.createElement("p");t.innerHTML=e,g.warnings.append(t),w.apply(void 0,arguments)}};var b=console.log.bind(console);console.log=function(){var e=L.apply(void 0,arguments);if(e&&("function"!=typeof e.indexOf||-1===e.indexOf("THREE.WebGLRenderer"))){g.messages.classList.remove("hide"),g.logsContainer.classList.remove("hide");var t=document.createElement("p");t.innerHTML=e,g.logs.append(t),b.apply(void 0,arguments)}};g.fullscreenButton.addEventListener("click",function(e){var t;e.preventDefault(),t=g.previews,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},!1);var E=new THREE.LoadingManager,T=0,S=null;E.onStart=function(){g.setOnLoadStartState(),S=setInterval(function(){(T+=5)>=100?clearInterval(S):g.loading.original.progress.style.width=T+"%"},100)},E.onLoad=function(){g.setOnLoadEndState(),clearInterval(S)},E.onProgress=function(){T>=100||(T+=1,g.loading.original.progress.style.width=T+"%")},E.onError=function(e){console.error(e)};var R=function(e,t){return function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(i,r){!0===o?e.parse(n,"",i,r):e.load(n,i,t.onProgress,r)})}},k=null,x=null,P=null,F=null,H=null,C=null,A=null,j=null,O=null,M=null,q=null,B=null,D=null,G=null,z=null,I=null,U=null,N=new function e(){return t(this,e),{get amfLoader(){return null===x&&(x=R(new THREE.AMFLoader(E),E)),x},get bufferGeometryLoader(){return null===k&&(k=R(new THREE.BufferGeometryLoader(E),E)),k},get colladaLoader(){return null===P&&(P=R(new THREE.ColladaLoader(E),E)),P},get fbxLoader(){return null===F&&(F=R(new THREE.FBXLoader(E),E)),F},get gltfLoader(){return null===H&&(H=R(new THREE.GLTFLoader(E),E)),H},get jsonLoader(){return null===C&&(C=R(new THREE.JSONLoader(E),E)),C},get legacyGltfLoader(){return null===A&&(A=R(new THREE.LegacyGLTFLoader(E),E)),A},get mtlLoader(){return null===j&&(j=R(new THREE.MTLLoader(E),E)),j},get objectLoader(){return null===O&&(O=R(new THREE.ObjectLoader(E),E)),O},get objLoader(){return null===U&&(U=new THREE.OBJLoader(E),(M=R(U,E)).setMaterials=function(e){U.setMaterials(e)}),M},get pcdLoader(){return null===q&&(q=R(new THREE.PCDLoader(E),E)),q},get pdbLoader(){return null===B&&(B=R(new THREE.PDBLoader(E),E)),B},get plyLoader(){return null===D&&(D=R(new THREE.PLYLoader(E),E)),D},get pwrmLoader(){return null===G&&(G=R(new THREE.PWRMLoader(E),E)),G},get stlLoader(){return null===z&&(z=R(new THREE.STLLoader(E),E)),z},get threemfLoader(){return null===I&&(I=R(new THREE.ThreeMFLoader(E),E)),I}}};function W(e,t){if(!(e instanceof Blob))throw new TypeError("Must be a File or Blob");return new Promise(function(n,o){var i=new FileReader;i.onload=function(e){n(e.target.result)},i.onerror=function(t){o(new Error("Error reading"+e.name+": "+t.target.result))},i["readAs"+t](e)})}window.File&&window.FileReader&&window.FileList&&window.Blob||console.error("This loader requires the File API. Please upgrade your browser");var _=function(e){return new RegExp("(bin|bmp|frag|gif|jpeg|jpg|mtl|png|svg|vert)$").test(e)},V=function(e){return new RegExp("(3mf|amf|ctm|dae|drc|fbx|gltf|glb|js|json|kmz|mmd|nrrd|obj|pcd|pdb|ply|pwrm|stl)$").test(e)},J=[],Y={},$=[],X=function(e){var t=e[0],n=e[1],o=e[2],i=e[3];switch(o){case"3mf":ue.load(N.threemfLoader(t),n);break;case"amf":ue.load(N.amfLoader(t),n);break;case"ctm":console.log("Support for "+o+" coming soon!");break;case"dae":ue.load(N.colladaLoader(t),n);break;case"drc":console.log("Support for "+o+" coming soon!");break;case"fbx":ue.load(N.fbxLoader(t),n);break;case"gltf":case"glb":ue.load(N.gltfLoader(t),n,t);break;case"json":case"js":!function(e,t,n){var o=JSON.parse(e);if(o.metadata){var i="";o.metadata.type&&(i=o.metadata.type.toLowerCase()),W(n,"DataURL").then(function(e){"buffergeometry"===i?ue.load(N.bufferGeometryLoader(e),t):"object"===i?ue.load(N.objectLoader(e),t):ue.load(N.jsonLoader(e),t)}).catch(function(e){return console.error(e)})}else console.error("Error: Invalid JSON file.")}(t,n,i);break;case"kmz":console.log("Support for "+o+" coming soon!");break;case"mmd":break;case"nrrd":console.log("Support for "+o+" coming soon!");break;case"obj":N.mtlLoader(Y[i.name.replace(".obj",".mtl")]).then(function(e){return N.objLoader.setMaterials(e),ue.load(N.objLoader(t),n)}).catch(function(e){return console.error(e)});break;case"pcd":ue.load(N.pcdLoader(t),n);break;case"pdb":console.log("Support for "+o+" coming soon!");break;case"ply":ue.load(N.plyLoader(t),n);break;case"pwrm":console.log("Support for "+o+" coming soon!");break;case"stl":ue.load(N.stlLoader(t),n);break;default:console.error("Unsupported file type "+o+" - please load one of the supported model formats.")}};E.setURLModifier(function(e){if("."===e[e.length-3]||"."===e[e.length-4]){var t=e.split(".").pop().toLowerCase();_(t)&&(e=(e=(e=e.replace("data:application/","")).split("/"))[e.length-1])}return void 0===Y[e]?e:Y[e]});var K=function(e){var t,n=e.name.split("/").pop().split(".")[0],o=e.name.split(".").pop().toLowerCase();if(_(t=o)||V(t))if("js"===o||"json"===o){var i=W(e,"Text").then(function(t){J.push([t,n,o,e])}).catch(function(e){return console.error(e)});$.push(i)}else{var r=W(e,"DataURL").then(function(t){V(o)?"obj"===o?J.push([t,n,o,e]):J.push([t,n,o]):_(o)&&(Y[e.name]=t)}).catch(function(e){return console.error(e)});$.push(r)}},Q=function(e){J=[],Y={},$=[];for(var t=0;t<e.length;t++)K(e[t]);Promise.all($).then(function(){J.forEach(function(e){return X(e)})}).catch(function(e){return console.error(e)})},Z=g.fileUpload.form,ee=g.fileUpload.button;function te(e){var t=void 0,n=void 0,o=void 0,i=void 0,r=this;void 0!==e?this.canvas=e:console.warn("Canvas is undefined! "),this.autoRender=!0,this.autoResize=!0,this.frameCount=0,this.delta=0,this.isPlaying=!1,this.isPaused=!1,this.time=new function(){var e=void 0,t=0,n=0;this.running=!1,this.paused=!1;var o=1,i=0,r=0;Object.defineProperties(this,{now:{get:function(){return(performance||Date).now()}},timeScale:{get:function(){return o},set:function(e){i=this.totalTime,r=this.now,o=e}},unscaledTotalTime:{get:function(){return this.running?this.now-n:0}},totalTime:{get:function(){var e=(this.now-r)*this.timeScale;return this.running?i+e:0}},unscaledDelta:{get:function(){var e=this.now-t;return t=this.now,e}},delta:{get:function(){return this.unscaledDelta*this.timeScale}}}),this.start=function(){if(this.paused){var o=this.now-e;n+=o,t+=o,r+=o}else this.running||(n=t=r=this.now,i=0);this.running=!0,this.paused=!1},this.stop=function(){n=0,i=0,this.running=!1},this.pause=function(){e=this.now,this.paused=!0}};var a=function(){o&&o.setSize(r.canvas.clientWidth,r.canvas.clientHeight,!1)},s=function(){n&&(n.aspect=r.canvas.clientWidth/r.canvas.clientHeight,n.updateProjectionMatrix())};this.onWindowResize=function(){};window.addEventListener("resize",function(){r.autoResize?n&&("PerspectiveCamera"===n.type?(s(),a(),r.onWindowResize()):console.warn("App: AutoResize only works with PerspectiveCamera")):r.onWindowResize()},!1),Object.defineProperties(this,{camera:{get:function(){return void 0===n&&(n=new THREE.PerspectiveCamera(50,this.canvas.clientWidth/this.canvas.clientHeight,.1,1e3)),n},set:function(e){n=e,s()}},scene:{get:function(){return void 0===t&&(t=new THREE.Scene),t},set:function(e){t=e}},renderer:{get:function(){return void 0===o&&((o=new THREE.WebGLRenderer({canvas:this.canvas,antialias:!0})).setPixelRatio(window.devicePixelRatio),o.setSize(this.canvas.clientWidth,this.canvas.clientHeight,!1)),o},set:function(e){o=e,a()}},averageFrameTime:{get:function(){return 0!==this.frameCount?this.time.unscaledTotalTime/this.frameCount:0}}}),this.play=function(){this.time.start(),this.isPlaying=!0,this.isPaused=!1,function e(){r.frameCount++,r.delta=r.time.delta,r.onUpdate(),r.controls&&r.controls.enableDamping&&r.controls.update(),r.autoRender&&r.renderer.render(r.scene,r.camera),i=requestAnimationFrame(function(){e()})}()},this.pause=function(){this.isPaused=!0,this.time.pause(),cancelAnimationFrame(i)},this.stop=function(){this.isPlaying=!1,this.isPaused=!1,this.time.stop(),this.frameCount=0,cancelAnimationFrame(i)},this.onUpdate=function(){},this.initControls=function(){this.controls=new THREE.OrbitControls(this.camera,this.canvas),this.controls.enableDamping=!0,this.controls.dampingFactor=.2},this.fitCameraToObject=function(e,t){t=t||1;var n=new THREE.Box3;n.setFromObject(e);var o=n.getCenter(),i=n.getSize(),r=Math.max(i.x,i.y,i.z),a=this.camera.fov*(Math.PI/180),s=Math.abs(r/4*Math.tan(2*a));s*=t;var l=-n.min.z+s,c=3*l;return this.camera.far=c,this.camera.near=c<1?.001:c<100?.01:c<500?.1:1,this.controls.target.copy(o),this.controls.maxDistance=2*l,this.camera.position.set(o.x,i.y,s),this.camera.updateProjectionMatrix(),this.controls.update(),this.controls.saveState(),n}}ee.addEventListener("click",function(e){e.preventDefault(),g.fileUpload.input.click()},!1),g.fileUpload.input.addEventListener("change",function(e){e.preventDefault();var t=e.target.files;Q(t)},!1),["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){return Z.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()})}),["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){return document.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()})}),["dragover","dragenter"].forEach(function(e){return Z.addEventListener(e,function(){ee.style.background="#B82601"})}),["dragend","dragleave","drop"].forEach(function(e){return Z.addEventListener(e,function(){ee.style.background="#062f4f"})}),g.fileUpload.form.addEventListener("drop",function(e){var t=e.dataTransfer.files;Q(t)});var ne=function(){function e(){t(this,e),this.isPaused=!1,this.pauseButtonActive=!1,this.clips=[],this.mixers=[],this.actions=[],this.animationNames=[]}return n(e,[{key:"reset",value:function(){this.clips=[],this.mixers=[],this.actions=[],this.animationNames=[],this.currentMixer=null,this.currentAction=null,this.isPaused=!1,this.pauseButtonActive=!1}},{key:"update",value:function(e){this.currentMixer&&this.currentAction&&!this.isPaused&&(this.currentMixer.update(e/1e3),this.setSliderValue(this.currentAction.time))}},{key:"initAnimation",value:function(e){var t=this;e.animations&&0!==e.animations.length&&(e.animations.forEach(function(n){if(n instanceof THREE.AnimationClip){var o=new THREE.AnimationMixer(e),i=o.clipAction(n);t.clips.push(n),t.mixers.push(o),t.actions.push(i),t.animationNames.push(n.name)}else console.warn("Some animations are not valid THREE.AnimationClips. Skipping these.")}),0!==this.animationNames.length&&this.selectCurrentAnimation(this.animationNames[0]))}},{key:"selectCurrentAnimation",value:function(e){var t=this.animationNames.indexOf(e);-1===t?console.warn("Animation "+e+" not found."):(this.currentAction&&this.currentAction.stop(),this.currentMixer=this.mixers[t],this.currentAction=this.actions[t],this.currentClip=this.clips[t],this.currentAction.play())}},{key:"setSliderValue",value:function(e){}},{key:"initPlayPauseControls",value:function(){var e=this;this.playPause=function(t){t.preventDefault(),e.togglePause()}}},{key:"togglePause",value:function(){this.isPaused?(this.pauseButtonActive=!1,this.play()):(this.pauseButtonActive=!0,this.pause())}},{key:"pause",value:function(){this.isPaused=!0}},{key:"play",value:function(){this.isPaused=!1}}]),e}(),oe=function(){function e(n){t(this,e),this.app=n,this.initMaterials(),this.initMesh(),this.initButton()}return n(e,[{key:"initMesh",value:function(){var e=new THREE.PlaneBufferGeometry(2,2,1),t=new THREE.Mesh(e,this.mat);this.app.camera.add(t)}},{key:"initMaterials",value:function(){var e=(new THREE.TextureLoader).load("/images/textures/noise-256.jpg");e.wrapS=e.wrapT=THREE.RepeatWrapping,this.colA=new THREE.Color(16777215),this.colB=new THREE.Color(2635844);var t={color1:{value:this.colA},color2:{value:this.colB},noiseTexture:{value:e},vignetteAmount:{value:0},mixAmount:{value:.08}};this.mat=new THREE.RawShaderMaterial({uniforms:t,depthFunc:THREE.NeverDepth,vertexShader:"#define GLSLIFY 1\nattribute vec3 position;\nvarying vec2 uv;\nvoid main() {\n\tgl_Position = vec4( vec3( position.x, position.y, 1.0 ), 1.0 );\n\tuv = vec2(position.x, position.y) * 0.5;\n}\n",fragmentShader:"precision mediump float;\n#define GLSLIFY 1\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float vignetteAmount;\nuniform float mixAmount;\nuniform vec2 smooth;\nuniform sampler2D noiseTexture;\nvarying vec2 uv;\nvoid main() {\n\tfloat dst = length( uv );\n\tvec3 color = mix( color1, color2, dst );\n  vec2 texSize = vec2( 0.25, 0.25 );\n  vec2 phase = fract(  uv / texSize );\n\tvec3 noise = mix( color, texture2D( noiseTexture, phase ).rgb, mixAmount );\n\tvec4 col = vec4( mix( noise, vec3( vignetteAmount ), dot( uv, uv ) ), 1.0 );\n\tgl_FragColor = col;\n}"})}},{key:"initButton",value:function(){var e=!0;e?(this.mat.uniforms.mixAmount.value=.08,this.mat.uniforms.vignetteAmount.value=0):(this.mat.uniforms.mixAmount.value=.8,this.mat.uniforms.vignetteAmount.value=-1.6),e=!e}}]),e}(),ie=function(){function e(n){t(this,e),this.app=n,this.initLights(),this.initialStrength=1.2}return n(e,[{key:"initLights",value:function(){var e=new THREE.AmbientLight(16777215,.3);this.app.scene.add(e),this.light=new THREE.PointLight(16777215,this.initialStrength),this.app.camera.add(this.light),this.app.scene.add(this.app.camera)}}]),e}(),re=function(){function e(n){t(this,e);var o=this;this.canvas=n,this.app=new te(this.canvas),this.animationControls=new ne,this.app.onUpdate=function(){o.animationControls.update(o.app.delta)},this.app.onWindowResize=function(){},this.loadedObjects=new THREE.Group,this.loadedMaterials=[],this.app.scene.add(this.loadedObjects),this.lighting=new ie(this.app),this.background=new oe(this.app),this.app.initControls()}return n(e,[{key:"addObjectToScene",value:function(e){this.reset(),void 0!==e?(this.animationControls.initAnimation(e),this.loadedObjects.add(e),this.app.fitCameraToObject(this.loadedObjects,.9),this.app.play()):console.error("Oops! An unspecified error occurred :(")}},{key:"reset",value:function(){for(;this.loadedObjects.children.length>0;){var e=this.loadedObjects.children[0];this.loadedObjects.remove(e),e=null}this.loadedMaterials=[],this.animationControls.reset()}}]),e}(),ae=document.createElement("a");ae.style.display="none",document.body.appendChild(ae);var se=function(e,t){ae.href=URL.createObjectURL(e),ae.download=t||"data.json",ae.click()},le=new(function(){function e(){t(this,e),this.loader=N.gltfLoader,this.exporter=new THREE.GLTFExporter,this.initExportButton(),this.initOptionListeners()}return n(e,[{key:"getOptions",value:function(){var e={trs:g.controls.trs.checked,onlyVisible:g.controls.onlyVisible.checked,truncateDrawRange:g.controls.truncateDrawRange.checked,binary:g.controls.binary.checked,embedImages:g.controls.embedImages.checked,animations:g.controls.animations.checked,forceIndices:!0,forcePowerOfTwoTextures:!0};return e.animations&&this.animations.length>0&&(e.animations=this.animations),e}},{key:"setInput",value:function(e,t,n){this.input=e,this.animations=t,this.name=n,this.parse()}},{key:"parse",value:function(){var e=this;this.exporter.parse(this.input,function(t){e.result=t,e.processResult(t)},this.getOptions())}},{key:"loadPreview",value:function(){ue.resultPreview.reset(),N.gltfLoader(this.output,!0).then(function(e){g.loading.result.overlay.classList.add("hide"),g.controls.exportGLTF.disabled=!1,e.scenes.length>1?e.scenes.forEach(function(t){e.animations&&(t.animations=e.animations),ue.resultPreview.addObjectToScene(t)}):e.scene&&(e.animations&&(e.scene.animations=e.animations),ue.resultPreview.addObjectToScene(e.scene))}).catch(function(e){console.log(e),g.loading.result.overlay.classList.remove("hide"),g.controls.exportGLTF.disabled=!0})}},{key:"processResult",value:function(){this.setOutput(),this.loadPreview()}},{key:"updateInfo",value:function(e){var t=g.controls.binary.checked?"GLB":"GLTF";g.controls.exportGLTF.value=e<1e6?"Export as "+t+" ("+Math.ceil(.001*e)+"kb)":"Export as "+t+" ("+(1e-6*e).toFixed(3)+"mb)"}},{key:"setOutput",value:function(){this.result instanceof ArrayBuffer?(this.output=this.result,this.updateInfo(this.result.byteLength)):(this.output=JSON.stringify(this.result,null,2),this.updateInfo(function(e){for(var t=e.length,n=e.length-1;n>=0;n--){var o=e.charCodeAt(n);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&n--}return t}(this.output)))}},{key:"save",value:function(){var e,t,n,o;this.output instanceof ArrayBuffer?(n=this.result,o=this.name+".glb",se(new Blob([n],{type:"application/octet-stream"}),o)):(e=this.output,t=this.name+".gltf",se(new Blob([e],{type:"text/plain"}),t))}},{key:"initExportButton",value:function(){var e=this;g.controls.exportGLTF.addEventListener("click",function(t){t.preventDefault(),e.output&&e.save(e.output)})}},{key:"initOptionListeners",value:function(){var e=this,t=function(t){t.preventDefault(),void 0!==e.input&&e.parse()};g.controls.trs.addEventListener("change",t,!1),g.controls.onlyVisible.addEventListener("change",t,!1),g.controls.truncateDrawRange.addEventListener("change",t,!1),g.controls.binary.addEventListener("change",t,!1),g.controls.embedImages.addEventListener("change",t,!1),g.controls.animations.addEventListener("change",t,!1)}}]),e}());THREE.Cache.enabled=!0;var ce=new THREE.MeshStandardMaterial({color:13421772,side:THREE.FrontSide}),ue=new(function(){function o(e,n){t(this,o),this.originalPreview=new re(e),this.resultPreview=new re(n)}return n(o,[{key:"load",value:function(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"scene",i=arguments[2];return E.onStart(),t.then(function(e){e.isGeometry||e.isBufferGeometry?n.onLoad(new THREE.Mesh(e,ce)):e.isObject3D?n.onLoad(e,o):e.scenes&&e.scenes.length>1?e.scenes.forEach(function(t){e.animations&&(t.animations=e.animations),n.onLoad(t,o)}):e.scene?(e.animations&&(e.scene.animations=e.animations),n.onLoad(e.scene,o)):console.error("No scene found in file!")}).catch(function(t){e(t.message)&&-1!==t.message.indexOf("Use LegacyGLTFLoader instead")?n.load(N.legacyGltfLoader(i)):console.error(t)}),t}},{key:"onLoad",value:function(e,t){e.traverse(function(e){e.material&&Array.isArray(e.material)&&console.error("Multimaterials are currently not supported.")});var n=[];e.animations&&(n=e.animations),this.originalPreview.addObjectToScene(e),this.resultPreview.reset(),le.setInput(e,n,t)}}]),o}())(g.originalCanvas,g.resultCanvas)}();