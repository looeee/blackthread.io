this["gltf-converter"]=this["gltf-converter"]||{},function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=document.querySelector("#original-preview-canvas"),o=document.querySelector("#result-preview-canvas"),r=document.querySelector("#previews"),a=document.querySelector("#fullscreen-button"),s=document.querySelector("#messages"),l=document.querySelector("#errors"),c=document.querySelector("#errors-container"),u=document.querySelector("#warnings"),d=document.querySelector("#warnings-container"),h=document.querySelector("#logs"),f=document.querySelector("#logs-container"),m={input:document.querySelector("#file-upload-input"),button:document.querySelector("#file-upload-button"),form:document.querySelector("#file-upload-form")},p={original:{bar:document.querySelector("#original-loading-bar"),overlay:document.querySelector("#original-loading-overlay"),progress:document.querySelector("#original-progress")},result:{bar:document.querySelector("#result-loading-bar"),overlay:document.querySelector("#result-loading-overlay"),progress:document.querySelector("#result-progress")}},v={trs:document.querySelector("#option_trs"),onlyVisible:document.querySelector("#option_visible"),truncateDrawRange:document.querySelector("#option_drawrange"),binary:document.querySelector("#option_binary"),embedImages:document.querySelector("#option_embedImages"),animations:document.querySelector("#option_animations"),exportGLTF:document.querySelector("#export")},g=function(){function e(){t(this,e)}return n(e,null,[{key:"setInitialState",value:function(){v.exportGLTF.disabled=!0,p.original.overlay.classList.remove("hide"),p.result.overlay.classList.remove("hide"),p.original.bar.classList.add("hide"),p.original.progress.style.width=0,p.result.bar.classList.add("hide"),p.result.progress.style.width=0}},{key:"setOnLoadStartState",value:function(){v.exportGLTF.disabled=!0,p.result.overlay.classList.remove("hide"),p.original.bar.classList.remove("hide"),s.classList.add("hide"),c.classList.add("hide"),d.classList.add("hide"),f.classList.add("hide"),l.innerHTML="",u.innerHTML="",h.innerHTML=""}},{key:"setOnLoadEndState",value:function(){p.original.overlay.classList.add("hide")}}]),e}();g.originalCanvas=i,g.resultCanvas=o,g.fileUpload=m,g.loading=p,g.controls=v,g.previews=r,g.fullscreenButton=a,g.messages=s,g.errorsContainer=c,g.errors=l,g.warningsContainer=d,g.warnings=u,g.logsContainer=f,g.logs=h;var y=console.warn.bind(console);function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.slice(1,t.length),o=0;return"string"==typeof t[0]?t[0].replace(/%s/g,function(e,t){return i.slice(o,++o)}):t[0]}console.error=function(){var e=w.apply(void 0,arguments);if(e){g.messages.classList.remove("hide"),g.errorsContainer.classList.remove("hide");var t=document.createElement("p");t.innerHTML=e,g.errors.append(t),y.apply(void 0,arguments)}};var b=console.warn.bind(console);console.warn=function(){var e=w.apply(void 0,arguments);if(e){g.messages.classList.remove("hide"),g.warningsContainer.classList.remove("hide");var t=document.createElement("p");t.innerHTML=e,g.warnings.append(t),b.apply(void 0,arguments)}};var L=console.log.bind(console);console.log=function(){var e=w.apply(void 0,arguments);if(e&&("function"!=typeof e.indexOf||-1===e.indexOf("THREE.WebGLRenderer"))){g.messages.classList.remove("hide"),g.logsContainer.classList.remove("hide");var t=document.createElement("p");t.innerHTML=e,g.logs.append(t),L.apply(void 0,arguments)}};g.fullscreenButton.addEventListener("click",function(e){var t;e.preventDefault(),t=g.previews,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},!1);var E=new THREE.LoadingManager,T=0,S=null;E.onStart=function(){g.setOnLoadStartState(),S=setInterval(function(){(T+=5)>=100?clearInterval(S):g.loading.original.progress.style.width=T+"%"},100)},E.onLoad=function(){g.setOnLoadEndState(),clearInterval(S)},E.onProgress=function(){T>=100||(T+=1,g.loading.original.progress.style.width=T+"%")},E.onError=function(e){console.error(e)};var x=function(e,t){return function(n){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(o,r){!0===i?e.parse(n,"",o,r):e.load(n,o,t.onProgress,r)})}},R=null,k=null,F=null,P=null,A=null,C=null,H=null,j=null,O=null,M=null,q=null,B=null,G=new function e(){return t(this,e),{get amfLoader(){return null===k&&(k=x(new THREE.AMFLoader(E),E)),k},get bufferGeometryLoader(){return null===R&&(R=x(new THREE.BufferGeometryLoader(E),E)),R},get colladaLoader(){return null===F&&(F=x(new THREE.ColladaLoader(E),E)),F},get fbxLoader(){return null===P&&(P=x(new THREE.FBXLoader(E),E)),P},get gltfLoader(){return null===A&&(A=x(new THREE.GLTFLoader(E),E)),A},get jsonLoader(){return null===C&&(C=x(new THREE.JSONLoader(E),E)),C},get legacyGltfLoader(){return null===H&&(H=x(new THREE.LegacyGLTFLoader(E),E)),H},get mtlLoader(){return null===j&&(j=x(new THREE.MTLLoader(E),E)),j},get objectLoader(){return null===O&&(O=x(new THREE.ObjectLoader(E),E)),O},get objLoader(){return null===B&&(B=new THREE.OBJLoader(E),(M=x(B,E)).setMaterials=function(e){B.setMaterials(e)}),M},get threemfLoader(){return null===q&&(q=x(new THREE.ThreeMFLoader(E),E)),q}}};function D(e,t){if(!(e instanceof Blob))throw new TypeError("Must be a File or Blob");return new Promise(function(n,i){var o=new FileReader;o.onload=function(e){n(e.target.result)},o.onerror=function(t){i(new Error("Error reading"+e.name+": "+t.target.result))},o["readAs"+t](e)})}window.File&&window.FileReader&&window.FileList&&window.Blob||console.error("This loader requires the File API. Please upgrade your browser");var z=function(e){return new RegExp("(bin|bmp|frag|gif|jpeg|jpg|mtl|png|svg|vert)$").test(e)},I=function(e){return new RegExp("(3mf|amf|ctm|dae|drc|fbx|gltf|glb|js|json|kmz|mmd|nrrd|objpcd|pdb|ply|pwrm|stl)$").test(e)},U=[],N={},W=[],_=function(e){var t=e[0],n=e[1],i=e[2],o=e[3];switch(i){case"3mf":re.load(G.threemfLoader(t),n);break;case"amf":re.load(G.amfLoader(t),n);break;case"ctm":console.log("Support for "+i+" coming soon!");break;case"dae":re.load(G.colladaLoader(t),n);break;case"drc":console.log("Support for "+i+" coming soon!");break;case"fbx":re.load(G.fbxLoader(t),n);break;case"gltf":case"glb":re.load(G.gltfLoader(t),n,t);break;case"json":case"js":!function(e,t,n){var i=JSON.parse(e);if(i.metadata){var o="";i.metadata.type&&(o=i.metadata.type.toLowerCase()),D(n,"DataURL").then(function(e){"buffergeometry"===o?re.load(G.bufferGeometryLoader(e),t):"object"===o?re.load(G.objectLoader(e),t):re.load(G.jsonLoader(e),t)}).catch(function(e){return console.error(e)})}else console.error("Error: Invalid JSON file.")}(t,n,o);break;case"kmz":case"mmd":case"nrrd":console.log("Support for "+i+" coming soon!");break;case"obj":G.mtlLoader(N[o.name.replace(".obj",".mtl")]).then(function(e){return G.objLoader.setMaterials(e),re.load(G.objLoader(t),n)}).catch(function(e){return console.error(e)});break;case"pcd":case"pdb":case"ply":case"pwrm":case"stl":console.log("Support for "+i+" coming soon!");break;default:console.error("Unsupported file type "+i+" - please load one of the supported model formats.")}};E.setURLModifier(function(e){if("."===e[e.length-3]||"."===e[e.length-4]){var t=e.split(".").pop().toLowerCase();z(t)&&(e=(e=(e=e.replace("data:application/","")).split("/"))[e.length-1])}return void 0===N[e]?e:N[e]});var V=function(e){var t,n=e.name.split("/").pop().split(".")[0],i=e.name.split(".").pop().toLowerCase();if(z(t=i)||I(t))if("js"===i||"json"===i){var o=D(e,"Text").then(function(t){U.push([t,n,i,e])}).catch(function(e){return console.error(e)});W.push(o)}else{var r=D(e,"DataURL").then(function(t){I(i)?"obj"===i?U.push([t,n,i,e]):U.push([t,n,i]):z(i)&&(N[e.name]=t)}).catch(function(e){return console.error(e)});W.push(r)}},J=function(e){U=[],N={},W=[];for(var t=0;t<e.length;t++)V(e[t]);Promise.all(W).then(function(){U.forEach(function(e){return _(e)})}).catch(function(e){return console.error(e)})},Y=g.fileUpload.form,$=g.fileUpload.button;function X(e){var t=void 0,n=void 0,i=void 0,o=void 0,r=this;void 0!==e?this.canvas=e:console.warn("Canvas is undefined! "),this.autoRender=!0,this.autoResize=!0,this.frameCount=0,this.delta=0,this.isPlaying=!1,this.isPaused=!1,this.time=new function(){var e=void 0,t=0,n=0;this.running=!1,this.paused=!1;var i=1,o=0,r=0;Object.defineProperties(this,{now:{get:function(){return(performance||Date).now()}},timeScale:{get:function(){return i},set:function(e){o=this.totalTime,r=this.now,i=e}},unscaledTotalTime:{get:function(){return this.running?this.now-n:0}},totalTime:{get:function(){var e=(this.now-r)*this.timeScale;return this.running?o+e:0}},unscaledDelta:{get:function(){var e=this.now-t;return t=this.now,e}},delta:{get:function(){return this.unscaledDelta*this.timeScale}}}),this.start=function(){if(this.paused){var i=this.now-e;n+=i,t+=i,r+=i}else this.running||(n=t=r=this.now,o=0);this.running=!0,this.paused=!1},this.stop=function(){n=0,o=0,this.running=!1},this.pause=function(){e=this.now,this.paused=!0}};var a=function(){i&&i.setSize(r.canvas.clientWidth,r.canvas.clientHeight,!1)},s=function(){n&&(n.aspect=r.canvas.clientWidth/r.canvas.clientHeight,n.updateProjectionMatrix())};this.onWindowResize=function(){};window.addEventListener("resize",function(){r.autoResize?n&&("PerspectiveCamera"===n.type?(s(),a(),r.onWindowResize()):console.warn("App: AutoResize only works with PerspectiveCamera")):r.onWindowResize()},!1),Object.defineProperties(this,{camera:{get:function(){return void 0===n&&(n=new THREE.PerspectiveCamera(50,this.canvas.clientWidth/this.canvas.clientHeight,.1,1e3)),n},set:function(e){n=e,s()}},scene:{get:function(){return void 0===t&&(t=new THREE.Scene),t},set:function(e){t=e}},renderer:{get:function(){return void 0===i&&((i=new THREE.WebGLRenderer({canvas:this.canvas,antialias:!0})).setPixelRatio(window.devicePixelRatio),i.setSize(this.canvas.clientWidth,this.canvas.clientHeight,!1)),i},set:function(e){i=e,a()}},averageFrameTime:{get:function(){return 0!==this.frameCount?this.time.unscaledTotalTime/this.frameCount:0}}}),this.play=function(){this.time.start(),this.isPlaying=!0,this.isPaused=!1,function e(){r.frameCount++,r.delta=r.time.delta,r.onUpdate(),r.controls&&r.controls.enableDamping&&r.controls.update(),r.autoRender&&r.renderer.render(r.scene,r.camera),o=requestAnimationFrame(function(){e()})}()},this.pause=function(){this.isPaused=!0,this.time.pause(),cancelAnimationFrame(o)},this.stop=function(){this.isPlaying=!1,this.isPaused=!1,this.time.stop(),this.frameCount=0,cancelAnimationFrame(o)},this.onUpdate=function(){},this.initControls=function(){this.controls=new THREE.OrbitControls(this.camera,this.canvas),this.controls.enableDamping=!0,this.controls.dampingFactor=.2},this.fitCameraToObject=function(e,t){t=t||1;var n=new THREE.Box3;n.setFromObject(e);var i=n.getCenter(),o=n.getSize(),r=Math.max(o.x,o.y,o.z),a=this.camera.fov*(Math.PI/180),s=Math.abs(r/4*Math.tan(2*a));s*=t;var l=-n.min.z+s,c=3*l;return this.camera.far=c,this.camera.near=c<1?.001:c<100?.01:c<500?.1:1,this.controls.target.copy(i),this.controls.maxDistance=2*l,this.camera.position.set(i.x,o.y,s),this.camera.updateProjectionMatrix(),this.controls.update(),this.controls.saveState(),n}}$.addEventListener("click",function(e){e.preventDefault(),g.fileUpload.input.click()},!1),g.fileUpload.input.addEventListener("change",function(e){e.preventDefault();var t=e.target.files;J(t)},!1),["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){return Y.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()})}),["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){return document.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()})}),["dragover","dragenter"].forEach(function(e){return Y.addEventListener(e,function(){$.style.background="#B82601"})}),["dragend","dragleave","drop"].forEach(function(e){return Y.addEventListener(e,function(){$.style.background="#062f4f"})}),g.fileUpload.form.addEventListener("drop",function(e){var t=e.dataTransfer.files;J(t)});var K=function(){function e(){t(this,e),this.isPaused=!1,this.pauseButtonActive=!1,this.clips=[],this.mixers=[],this.actions=[],this.animationNames=[]}return n(e,[{key:"reset",value:function(){this.clips=[],this.mixers=[],this.actions=[],this.animationNames=[],this.currentMixer=null,this.currentAction=null,this.isPaused=!1,this.pauseButtonActive=!1}},{key:"update",value:function(e){this.currentMixer&&this.currentAction&&!this.isPaused&&(this.currentMixer.update(e/1e3),this.setSliderValue(this.currentAction.time))}},{key:"initAnimation",value:function(e){var t=this;e.animations&&0!==e.animations.length&&(e.animations.forEach(function(n){if(n instanceof THREE.AnimationClip){var i=new THREE.AnimationMixer(e),o=i.clipAction(n);t.clips.push(n),t.mixers.push(i),t.actions.push(o),t.animationNames.push(n.name)}else console.warn("Some animations are not valid THREE.AnimationClips. Skipping these.")}),0!==this.animationNames.length&&this.selectCurrentAnimation(this.animationNames[0]))}},{key:"selectCurrentAnimation",value:function(e){var t=this.animationNames.indexOf(e);-1===t?console.warn("Animation "+e+" not found."):(this.currentAction&&this.currentAction.stop(),this.currentMixer=this.mixers[t],this.currentAction=this.actions[t],this.currentClip=this.clips[t],this.currentAction.play())}},{key:"setSliderValue",value:function(e){}},{key:"initPlayPauseControls",value:function(){var e=this;this.playPause=function(t){t.preventDefault(),e.togglePause()}}},{key:"togglePause",value:function(){this.isPaused?(this.pauseButtonActive=!1,this.play()):(this.pauseButtonActive=!0,this.pause())}},{key:"pause",value:function(){this.isPaused=!0}},{key:"play",value:function(){this.isPaused=!1}}]),e}(),Q=function(){function e(n){t(this,e),this.app=n,this.initMaterials(),this.initMesh(),this.initButton()}return n(e,[{key:"initMesh",value:function(){var e=new THREE.PlaneBufferGeometry(2,2,1),t=new THREE.Mesh(e,this.mat);this.app.camera.add(t)}},{key:"initMaterials",value:function(){var e=(new THREE.TextureLoader).load("/images/textures/noise-256.jpg");e.wrapS=e.wrapT=THREE.RepeatWrapping,this.colA=new THREE.Color(16777215),this.colB=new THREE.Color(2635844);var t={color1:{value:this.colA},color2:{value:this.colB},noiseTexture:{value:e},vignetteAmount:{value:0},mixAmount:{value:.08}};this.mat=new THREE.RawShaderMaterial({uniforms:t,depthFunc:THREE.NeverDepth,vertexShader:"#define GLSLIFY 1\nattribute vec3 position;\nvarying vec2 uv;\nvoid main() {\n\tgl_Position = vec4( vec3( position.x, position.y, 1.0 ), 1.0 );\n\tuv = vec2(position.x, position.y) * 0.5;\n}\n",fragmentShader:"precision mediump float;\n#define GLSLIFY 1\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float vignetteAmount;\nuniform float mixAmount;\nuniform vec2 smooth;\nuniform sampler2D noiseTexture;\nvarying vec2 uv;\nvoid main() {\n\tfloat dst = length( uv );\n\tvec3 color = mix( color1, color2, dst );\n  vec2 texSize = vec2( 0.25, 0.25 );\n  vec2 phase = fract(  uv / texSize );\n\tvec3 noise = mix( color, texture2D( noiseTexture, phase ).rgb, mixAmount );\n\tvec4 col = vec4( mix( noise, vec3( vignetteAmount ), dot( uv, uv ) ), 1.0 );\n\tgl_FragColor = col;\n}"})}},{key:"initButton",value:function(){var e=!0;e?(this.mat.uniforms.mixAmount.value=.08,this.mat.uniforms.vignetteAmount.value=0):(this.mat.uniforms.mixAmount.value=.8,this.mat.uniforms.vignetteAmount.value=-1.6),e=!e}}]),e}(),Z=function(){function e(n){t(this,e),this.app=n,this.initLights(),this.initialStrength=1.2}return n(e,[{key:"initLights",value:function(){var e=new THREE.AmbientLight(16777215,.3);this.app.scene.add(e),this.light=new THREE.PointLight(16777215,this.initialStrength),this.app.camera.add(this.light),this.app.scene.add(this.app.camera)}}]),e}(),ee=function(){function e(n){t(this,e);var i=this;this.canvas=n,this.app=new X(this.canvas),this.animationControls=new K,this.app.onUpdate=function(){i.animationControls.update(i.app.delta)},this.app.onWindowResize=function(){},this.loadedObjects=new THREE.Group,this.loadedMaterials=[],this.app.scene.add(this.loadedObjects),this.lighting=new Z(this.app),this.background=new Q(this.app),this.app.initControls()}return n(e,[{key:"addObjectToScene",value:function(e){this.reset(),void 0!==e?(this.animationControls.initAnimation(e),this.loadedObjects.add(e),this.app.fitCameraToObject(this.loadedObjects,.9),this.app.play()):console.error("Oops! An unspecified error occurred :(")}},{key:"reset",value:function(){for(;this.loadedObjects.children.length>0;){var e=this.loadedObjects.children[0];this.loadedObjects.remove(e),e=null}this.loadedMaterials=[],this.animationControls.reset()}}]),e}(),te=document.createElement("a");te.style.display="none",document.body.appendChild(te);var ne=function(e,t){te.href=URL.createObjectURL(e),te.download=t||"data.json",te.click()},ie=new(function(){function e(){t(this,e),this.loader=G.gltfLoader,this.exporter=new THREE.GLTFExporter,this.initExportButton(),this.initOptionListeners()}return n(e,[{key:"getOptions",value:function(){var e={trs:g.controls.trs.checked,onlyVisible:g.controls.onlyVisible.checked,truncateDrawRange:g.controls.truncateDrawRange.checked,binary:g.controls.binary.checked,embedImages:g.controls.embedImages.checked,animations:g.controls.animations.checked,forceIndices:!0,forcePowerOfTwoTextures:!0};return e.animations&&this.animations.length>0&&(e.animations=this.animations),e}},{key:"setInput",value:function(e,t,n){this.input=e,this.animations=t,this.name=n,this.parse()}},{key:"parse",value:function(){var e=this;this.exporter.parse(this.input,function(t){e.result=t,e.processResult(t)},this.getOptions())}},{key:"loadPreview",value:function(){re.resultPreview.reset(),G.gltfLoader(this.output,!0).then(function(e){g.loading.result.overlay.classList.add("hide"),g.controls.exportGLTF.disabled=!1,e.scenes.length>1?e.scenes.forEach(function(t){e.animations&&(t.animations=e.animations),re.resultPreview.addObjectToScene(t)}):e.scene&&(e.animations&&(e.scene.animations=e.animations),re.resultPreview.addObjectToScene(e.scene))}).catch(function(e){console.log(e),g.loading.result.overlay.classList.remove("hide"),g.controls.exportGLTF.disabled=!0})}},{key:"processResult",value:function(){this.setOutput(),this.loadPreview()}},{key:"updateInfo",value:function(e){var t=g.controls.binary.checked?"GLB":"GLTF";g.controls.exportGLTF.value=e<1e6?"Export as "+t+" ("+Math.ceil(.001*e)+"kb)":"Export as "+t+" ("+(1e-6*e).toFixed(3)+"mb)"}},{key:"setOutput",value:function(){this.result instanceof ArrayBuffer?(this.output=this.result,this.updateInfo(this.result.byteLength)):(this.output=JSON.stringify(this.result,null,2),this.updateInfo(function(e){for(var t=e.length,n=e.length-1;n>=0;n--){var i=e.charCodeAt(n);i>127&&i<=2047?t++:i>2047&&i<=65535&&(t+=2),i>=56320&&i<=57343&&n--}return t}(this.output)))}},{key:"save",value:function(){var e,t,n,i;this.output instanceof ArrayBuffer?(n=this.result,i=this.name+".glb",ne(new Blob([n],{type:"application/octet-stream"}),i)):(e=this.output,t=this.name+".gltf",ne(new Blob([e],{type:"text/plain"}),t))}},{key:"initExportButton",value:function(){var e=this;g.controls.exportGLTF.addEventListener("click",function(t){t.preventDefault(),e.output&&e.save(e.output)})}},{key:"initOptionListeners",value:function(){var e=this,t=function(t){t.preventDefault(),void 0!==e.input&&e.parse()};g.controls.trs.addEventListener("change",t,!1),g.controls.onlyVisible.addEventListener("change",t,!1),g.controls.truncateDrawRange.addEventListener("change",t,!1),g.controls.binary.addEventListener("change",t,!1),g.controls.embedImages.addEventListener("change",t,!1),g.controls.animations.addEventListener("change",t,!1)}}]),e}());THREE.Cache.enabled=!0;var oe=new THREE.MeshBasicMaterial({wireframe:!0,color:0}),re=new(function(){function i(e,n){t(this,i),this.originalPreview=new ee(e),this.resultPreview=new ee(n)}return n(i,[{key:"load",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"scene",o=arguments[2];return E.onStart(),t.then(function(e){e.isGeometry||e.isBufferGeometry?n.onLoad(new THREE.Mesh(e,oe)):e.isObject3D?n.onLoad(e,i):e.scenes&&e.scenes.length>1?e.scenes.forEach(function(t){e.animations&&(t.animations=e.animations),n.onLoad(t,i)}):e.scene?(e.animations&&(e.scene.animations=e.animations),n.onLoad(e.scene,i)):console.error("No scene found in file!")}).catch(function(t){e(t.message)&&-1!==t.message.indexOf("Use LegacyGLTFLoader instead")?n.load(G.legacyGltfLoader(o)):console.error(t)}),t}},{key:"onLoad",value:function(e,t){e.traverse(function(e){e.material&&Array.isArray(e.material)&&console.error("Multimaterials are currently not supported.")});var n=[];e.animations&&(n=e.animations),this.originalPreview.addObjectToScene(e),this.resultPreview.reset(),ie.setInput(e,n,t)}}]),i}())(g.originalCanvas,g.resultCanvas)}();